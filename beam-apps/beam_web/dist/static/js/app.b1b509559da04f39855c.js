webpackJsonp([2],{"0ZNX":function(t,e){},"3pLw":function(t,e,i){"use strict";var s=i("//Fk"),o=i.n(s),a=i("woOf"),n=i.n(a),l=i("mtWM"),r=i.n(l),c={},d=i("zL8q"),u={get:function(t,e){var i=n()({},c,e);return r.a.get(t,{params:i}).then(function(t){return o.a.resolve(t.data)})},post:function(t,e){return r.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",t="/energy_ht"+t,r.a.post(t,e).then(function(t){return null==t.data.code?o.a.resolve(t.data):403===t.data.code||402==t.data.code?(window.location="/#/login",o.a.reject(t)):0===t.data.code?o.a.resolve(t.data):void d.Message.error(t.data.msg)}).catch(function(t){if(console.log(t.config),t.response){var e={code:t.code,msg:t.message};return o.a.reject(e)}if(t.request){if(4==t.request.readyState&&0==t.request.status){e={code:403,msg:"网络链接错误，请刷新重试！"};return o.a.reject(e)}}else console.log("Error",t.message),d.Message.error(t.message)})}};e.a=u},"A+kf":function(t,e){},AKIl:function(t,e){},AVo2:function(t,e){},AYsf:function(t,e){},CsbD:function(t,e){},Fjiv:function(t,e,i){"use strict";var s=i("zgCA"),o=i.n(s),a=i("w4jL");var n=function(t){i("lryW")},l=i("VU/8")(o.a,a.a,!1,n,null,null);e.default=l.exports},JAM6:function(t,e){},KYI3:function(t,e){},L0Ke:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=i("VU/8")({name:"App",data:function(){return{}},mounted:function(){},methods:{}},o,!1,function(t){i("wS5Y")},null,null).exports,n=i("/ocq"),l=i("TIfe"),r={name:"sidebar",data:function(){return{sideItems:pi[1].children}},computed:{},methods:{}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sidebar"},[i("div",{staticClass:"sidebar__logo-wrap"},[i("div",{staticClass:"sidebar__logo",style:{backgroundImage:"url(/static/images/avatar_logo.png)"}})]),t._v(" "),i("ul",{staticClass:"sidebar__container"},t._l(t.sideItems,function(e,s){return e.exclude?t._e():i("li",[i("router-link",{attrs:{to:e.path}},[[i("i",{staticClass:"sidebar__logo",class:e.icon?e.icon:"el-icon-tickets"}),t._v(" "+t._s(e.name))]],2)],1)}))])},staticRenderFns:[]};var d=i("VU/8")(r,c,!1,function(t){i("R1ah")},null,null).exports,u=i("3pLw"),p=function(t){return u.a.post("/account/password",t)},m={name:"headerbar",data:function(){var t=this;return{loading:!1,dialogFormVisible:!1,pwdForm:{oldPwd:"",newPwd:"",password_confirm:""},rules:{oldPwd:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPwd:[{required:!0,message:"请输入新密码",trigger:"blur"}],password_confirm:[{validator:function(e,i,s){""===i?s(new Error("请再次输入密码")):i!==t.pwdForm.newPwd?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]}}},mounted:function(){},methods:{handleCommand:function(t){2==t&&(this.dialogFormVisible=!0)},modifyPwd:function(){var t=this;this.$refs.AccountForm.validate(function(e){e&&(t.loading=!0,p(t.pwdForm).then(function(e){t.loading=!1,0===e.code?(t.dialogFormVisible=!1,t.$message.success("修改成功！"),Object(l.b)(""),location.reload()):t.$message.error(e.msg)},function(e){t.loading=!1,t.$message.error(e.msg)}))})}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"header-bar"},[i("div",{staticClass:"header__user-wrap"},[i("div",{staticClass:"header__icon",staticStyle:{"background-image":"url('/static/images/icon_store.png')"}}),t._v(" "),i("el-dropdown",{on:{command:t.handleCommand}},[i("span",[t._v("管理员")]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[t._v("管理员")]),t._v(" "),i("el-dropdown-item",{attrs:{command:"2"}},[t._v("修改密码")]),t._v(" "),i("el-dropdown-item",{attrs:{command:""}},[t._v("注销")])],1)],1)],1)]),t._v(" "),i("el-dialog",{attrs:{title:"修改密码",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"AccountForm",attrs:{model:t.pwdForm,rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"旧密码",prop:"oldPwd"}},[i("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"旧密码"},model:{value:t.pwdForm.oldPwd,callback:function(e){t.$set(t.pwdForm,"oldPwd","string"==typeof e?e.trim():e)},expression:"pwdForm.oldPwd"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"新密码",prop:"newPwd"}},[i("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"新密码"},model:{value:t.pwdForm.newPwd,callback:function(e){t.$set(t.pwdForm,"newPwd","string"==typeof e?e.trim():e)},expression:"pwdForm.newPwd"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"确认密码",prop:"password_confirm"}},[i("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:t.pwdForm.password_confirm,callback:function(e){t.$set(t.pwdForm,"password_confirm","string"==typeof e?e.trim():e)},expression:"pwdForm.password_confirm"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading,size:"mini"},on:{click:function(e){t.modifyPwd()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var h={name:"HOME",components:{Sidebar:d,Headerbar:i("VU/8")(m,f,!1,function(t){i("kmkW")},"data-v-5d9c2357",null).exports},data:function(){return{transitionName:"slide-bottom"}},mounted:function(){},methods:{}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"home"}},[e("sidebar"),this._v(" "),e("div",{staticClass:"container"},[e("headerbar"),this._v(" "),e("div",{staticClass:"app"},[e("div",{staticClass:"app-inner"},[e("transition",{attrs:{name:this.transitionName,mode:"out-in"}},[e("router-view")],1)],1)])],1)],1)},staticRenderFns:[]};var _=i("VU/8")(h,g,!1,function(t){i("yc4b")},null,null).exports,v={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dashboard"},[e("div",{staticClass:"dashboard-center"},[this._v("\n    这里是首页\n  ")])])}]},b=i("VU/8")(null,v,!1,null,null,null).exports,y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"second-router"}},[t.routeInfo.hidden_child?t._e():i("div",{staticClass:"router-left"},[t.routeInfo?i("ul",{staticClass:"second-menu"},t._l(t.routeInfo.children||[],function(e){return e.name?i("li",{staticClass:"menu__item"},[t._v("\n        "+t._s(e.name)+"\n        "),i("ul",t._l(e.children||[],function(s,o){return s.exclude?t._e():i("li",[s.disabled?i("span",{staticClass:"menu-sub__item disabled",on:{click:function(e){t.$message.warning("敬请期待！！！")}}},[t._v(t._s(s.name))]):i("router-link",{staticClass:"menu-sub__item",attrs:{to:t.routeInfo.path+"/"+e.path+"/"+s.path},nativeOn:{click:function(i){t.c(t.routeInfo.path+"/"+e.path+"/"+s.path)}}},[t.badge&&t.badge.index===o&&t.badge.val>0?i("el-badge",{attrs:{value:t.badge.val}},[t._v(t._s(s.name))]):[t._v(t._s(s.name))]],2)],1)}))]):t._e()})):t._e()]),t._v(" "),i("div",{staticClass:"router-right"},[i("div",{staticClass:"router-right__content"},[i("router-view")],1)])])},staticRenderFns:[]};var w=i("VU/8")({props:["routeInfo","badge"],methods:{c:function(t){}}},y,!1,function(t){i("JAM6")},null,null).exports,k={name:"router",data:function(){return{route:N}},components:{SecondRouter:w}},x={render:function(){var t=this.$createElement;return(this._self._c||t)("SecondRouter",{attrs:{"route-info":this.route}})},staticRenderFns:[]},C=i("VU/8")(k,x,!1,null,null,null).exports,z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"member"}},[e("router-view")],1)},staticRenderFns:[]};var $=i("VU/8")({},z,!1,function(t){i("uFv7")},null,null).exports,S=i("Fjiv"),P=function(t){return u.a.post("/member/list",t)},q={name:"member-list",components:{CommonTemplate:S.default},data:function(){return{genders:["未知","男","女"],list:null,req:{nickName:""},page:{pageNo:1,pageSize:20}}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.req.p=this.page.pageNo,this.req.s=this.page.pageSize,P(this.req).then(function(e){t.list=e.list?e.list:[],t.page=e.page},function(e){t.list=[],t.$message.error(e.msg)})},reload:function(){this.page.pageNo=1,this.getList()},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getList()}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"member-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"性别"}},[i("span",[t._v(t._s(t.genders[e.row.gender]))])]),t._v(" "),i("el-form-item",{attrs:{label:"真实姓名"}},[i("span",[t._v(t._s(e.row.realName))])]),t._v(" "),i("el-form-item",{attrs:{label:"手机号"}},[i("span",[t._v(t._s(e.row.phone))])]),t._v(" "),i("el-form-item",{attrs:{label:"生日"}},[i("span",[t._v(t._s(e.row.bornDate))])]),t._v(" "),i("el-form-item",{attrs:{label:"住址"}},[i("span",[t._v(t._s(e.row.address))])]),t._v(" "),i("el-form-item",{attrs:{label:"行业"}},[i("span",[t._v(t._s(e.row.industry))])]),t._v(" "),i("el-form-item",{attrs:{label:"公司"}},[i("span",[t._v(t._s(e.row.company))])]),t._v(" "),i("el-form-item",{attrs:{label:"职位"}},[i("span",[t._v(t._s(e.row.job))])])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"客户信息","min-width":"180",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.photo+")"}}),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.nickName))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"可用能量",align:"center",prop:"energy"}}),t._v(" "),i("el-table-column",{attrs:{label:"历史能量",align:"center",prop:"totalEnergy"}}),t._v(" "),i("el-table-column",{attrs:{label:"签到天数",align:"center",prop:"continueSigninNum"}}),t._v(" "),i("el-table-column",{attrs:{label:"今日转化微信运动步数",align:"center",prop:"wxRunStep"}}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"加入时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"最近一次登录时间",align:"center",prop:"lastLoginTime"}})],1),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e()],1)])],1)},staticRenderFns:[]};var N={path:"/member",name:"微信客户",icon:"el-icon-view",component:$,hidden_child:!1,children:[{name:"客户管理",path:"manager",component:C,children:[{name:"全部客户",path:"list",component:i("VU/8")(q,T,!1,function(t){i("oeO3")},null,null).exports,meta:{title:"客户列表"}}],redirect:"/member/manager/list"}],redirect:"/member/manager"},L={name:"router",data:function(){return{route:It}},components:{SecondRouter:w}},E={render:function(){var t=this.$createElement;return(this._self._c||t)("SecondRouter",{attrs:{"route-info":this.route}})},staticRenderFns:[]},R=i("VU/8")(L,E,!1,null,null,null).exports,D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"energy"}},[e("router-view")],1)},staticRenderFns:[]};var A=i("VU/8")({},D,!1,function(t){i("oIwQ")},null,null).exports,V={props:{show:{type:Boolean,default:!1},limit:{type:Number,default:1},limit_max:{type:Boolean,default:!0},current_len:{type:Number,default:0},multity:{type:String,default:""},action:{type:String,default:"add"},reset:{type:Boolean,default:!1}},data:function(){return{formLabelWidth:"100px",binded:!1,pics:[],can_add:!0,len:this.current_len,prev_len:null,url:null,my_show:this.show,multity_len_map:{},is_mutiple:!0}},mounted:function(){},updated:function(){if(this.show&&!this.binded&&this.$refs.file){this.binded=!0;var t=this.limit,e=this;this.$refs.file.onchange=function(){var i=this,s=this.files.length;if(e.limit_max){var o=""===e.multity?e.len:e.multity_len_map[e.multity];this.files.length>=t-o&&(s=t-o,e.can_add=!1,this.files.length!==s&&e.$message.warning("已自动过滤 "+(this.files.length-s)+" 张"))}else s=s>t?t:s;for(var a=function(t){var o=new FileReader;o.addEventListener("load",function(i){var o=i.target.result;e.pics.push(o),t===s-1&&(""===e.multity?e.len+=s:e.multity_len_map[e.multity]+=s),e.$refs.file.value=null}),o.readAsDataURL(i.files[t])},n=0;n<s;n++)a(n)}}},methods:{cancel:function(){this.pics=[],this.prev_len&&(this.len=this.prev_len),this.$emit("update:show",!1)},confirm:function(){this.$emit("confirm",this.pics),this.$emit("update:show",!1),this.pics=[]},confirmWithUrl:function(){this.url?(""===this.multity?this.len+=1:this.multity_len_map[this.multity]+=1,this.$emit("update:show",!1),this.$emit("confirm",[this.url])):this.$message.error("请输入要提取图片的地址")},deletePhoto:function(t){this.pics.splice(t,1),""===this.multity?this.len-=1:this.multity_len_map[this.multity]-=1,this.can_add=!0}},watch:{current_len:function(t){this.len=t},show:function(t){if(this.my_show=t,this.limit_max){if(t){if(this.reset)return""===this.multity?this.len=0:this.multity_len_map[this.multity]=0,this.is_mutiple=!0,this.can_add=!0,void this.$emit("update:reset",!1);if("change"===this.action)this.is_mutiple=!1,""===this.multity?this.len=0:this.multity_len_map[this.multity]=0,this.limit>1?this.$message.error("超过1张不可修改"):this.can_add=!0;else{if(console.log("add"),this.is_mutiple=!0,""===this.multity){if(this.len>=this.limit)return void(this.can_add=!1)}else if(!this.multity_len_map[this.multity]&&(this.multity_len_map[this.multity]=0),this.multity_len_map[this.multity]>=this.limit)return void(this.can_add=!1);this.can_add=!0}}}else this.can_add=!0},my_show:function(t){t||(this.cancel(),this.$emit("update:show",!1))}}},F={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"photo-dialog",attrs:{title:"本地上传",visible:t.my_show},on:{"update:visible":function(e){t.my_show=e}}},[i("el-form",[i("el-form-item",{attrs:{label:"网络图片","label-width":t.formLabelWidth}},[i("div",{staticClass:"dialog-row"},[i("el-input",{staticClass:"dialog-input",attrs:{"auto-complete":"off",size:"small"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:t.confirmWithUrl}},[t._v("提取")])],1)]),t._v(" "),i("el-form-item",{attrs:{label:"本地图片","label-width":t.formLabelWidth}},[i("div",[i("ul",{staticClass:"xs-upload-list"},t._l(t.pics,function(e,s){return i("li",{staticClass:"xs-upload-list__item"},[i("img",{staticClass:"xs-upload-list__item-thumb",attrs:{src:e,alt:""}}),t._v(" "),i("span",{staticClass:"xs-upload-list__item-actions",on:{click:function(e){e.stopPropagation(),t.deletePhoto(s)}}},[i("span",{staticClass:"xs-upload-list__item-delete"},[i("i",{staticClass:"el-icon-delete"})])])])})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.can_add,expression:"can_add"}],staticClass:"xs-upload",attrs:{tabindex:"0"}},[i("i",{staticClass:"el-icon-plus"}),t._v(" "),i("input",{ref:"file",staticClass:"xs-upload__input",attrs:{type:"file",name:"file",accept:"image/jpeg, image/png, image/gif",multiple:t.is_mutiple}})])])])],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var U=i("VU/8")(V,F,!1,function(t){i("AYsf")},"data-v-07d58724",null).exports,I=function(t){return u.a.post("/poster/list",t)},B=function(t){return u.a.post("/poster/"+t+"/info",{})},O=function(t){return u.a.post("/poster/save",t)},K=function(t){return u.a.post("/poster/delete",t)},j=function(t,e){return u.a.post("/poster/publish/"+e,t)},W=function(t){return u.a.post("/category/"+t+"/chooselist",{})},H=function(t){return u.a.post("/poster/"+t+"/advert",{})},M=function(t){return u.a.post("/files/upload",t)},Y=function(t){return u.a.post("/advert/list",t)},J=function(t){return u.a.post("/advert/poster/list",t)},G=function(t){return u.a.post("/advert/save",t)},Q=function(t){return u.a.post("/advert/delete",t)},Z=function(t,e){return u.a.post("/advert/publish/"+e,t)},X=function(t){return u.a.post("/advert/reset",t)},tt={name:"poster-list",components:{CommonTemplate:S.default,UploadPhoto:U},data:function(){var t=this;return{list:null,req:{cid:0,type:1},page:{pageNo:1,pageSize:20},choose_id_arr:[],cate_list:[],advert:{position:3,sort:1,frozen:!0,type:1,energy:0},btn_advert_loading:!1,showAdvertPicDialog:!1,editAdvertVisible:!1,advertRules:{linkman:[{required:!0,message:"请填写客户名称",trigger:"blur"}],linkTel:[{required:!0,message:"请填写客户联系方式",trigger:"blur"}],title:[{required:!0,message:"请填写广告标题",trigger:"blur"}],appid:[{validator:function(e,i,s){1!=t.advert.type||i?s():s(new Error("请填写小程序appid"))},trigger:"blur"}],wxadKey:[{validator:function(e,i,s){2!=t.advert.type||i?s():s(new Error("请填写微信广告主key"))},trigger:"blur"}]}}},created:function(){this.getList(),this.getCateList(),this.getAdvert()},methods:{getList:function(){var t=this;this.req.p=this.page.pageNo,this.req.s=this.page.pageSize,I(this.req).then(function(e){t.list=e.list,t.list.forEach(function(t){t.frozen=Boolean(t.frozen)}),t.page=e.page},function(e){t.$message.error(e.msg)})},reload:function(){this.page.pageNo=1,this.getList()},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},handleEdit:function(t){this.$router.push({path:"/energy/manager/1/edit/"+t})},changeStatus:function(t,e){var i=this;j([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){K(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})})},getCateList:function(){var t=this;W(1).then(function(e){t.getChooseList(e.list,0)},function(e){t.$message.error(e.msg)})},getChooseList:function(t,e){var i=this;t&&(0==e&&(this.cate_list=[]),e+=1,t.forEach(function(t){for(var s=20,o=2;o<=e;o++)s+=10;i.cate_list.push({id:t.id,name:t.name,style:s+"px"}),i.getChooseList(t.list,e)}))},getAdvert:function(){var t=this;H(4).then(function(e){t.advert=e.advert},function(e){t.$message.error(e.msg)})},saveAdvert:function(){var t=this;this.$refs.AdvertForm.validate(function(e){e&&(t.btn_advert_loading=!0,G(t.advert).then(function(e){t.btn_advert_loading=!1,0===e.code?(t.editAdvertVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.btn_advert_loading=!1,t.$message.error(e.msg)}))})},handleAdvertEdit:function(){this.editAdvertVisible=!0},confirmAdvertPic:function(t){this.advert.pic=t[0]}}},et={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:[t.advert],"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{label:"广告信息",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[e.row.pic?i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.pic+")"}}):t._e(),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.title))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkman))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkTel))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"广告跳转",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?i("div",[i("p",[t._v("跳转到小程序")]),t._v(" "),i("p",[t._v(t._s(e.row.appid))]),t._v(" "),i("p",[t._v(t._s(e.row.appPage))])]):t._e(),t._v(" "),2==e.row.type?i("div",[i("p",[t._v("对接微信广告")]),t._v(" "),i("p",[t._v(t._s(e.row.wxadKey))])]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"是否显示",align:"center",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.frozen?"已显示":"隐藏中")+"\n          ")]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleAdvertEdit(e.$index)}}},[t._v("编辑")])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.$router.push("/energy/manager/1/add")}}},[t._v("新增文章")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1),t._v(" "),i("div",{staticClass:"operation-right"},[i("el-select",{attrs:{size:"small",placeholder:"全部分类"},on:{change:t.reload},model:{value:t.req.cid,callback:function(e){t.$set(t.req,"cid",e)},expression:"req.cid"}},[i("el-option",{attrs:{value:0,label:"全部分类"}}),t._v(" "),t._l(t.cate_list,function(t,e){return i("el-option",{key:e,style:{"padding-left":t.style},attrs:{label:t.name,value:t.id}})})],2),t._v(" "),i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.reload(e):null}},model:{value:t.req.keywords,callback:function(e){t.$set(t.req,"keywords",e)},expression:"req.keywords"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.reload()}},slot:"append"})],1)],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"文章信息",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.thumb+")"}}),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.title)+" "),1==e.row.isHot?i("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("推荐")]):t._e()],1),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v("栏目："+t._s(e.row.cname))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v("作者："+t._s(e.row.author))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v("分享可得能量："+t._s(e.row.shareEnergy))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"简介",align:"left",prop:"brief"}}),t._v(" "),i("el-table-column",{attrs:{width:"150",label:"发布状态",align:"center",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"已发布":"隐藏中"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"发布时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e()],1)]),t._v(" "),i("el-dialog",{attrs:{title:"详情页广告",visible:t.editAdvertVisible},on:{"update:visible":function(e){t.editAdvertVisible=e}}},[i("el-form",{ref:"AdvertForm",attrs:{model:t.advert,rules:t.advertRules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"图片",prop:"pic"}},[i("ul",{staticClass:"app-image-list"},[t.advert.pic?i("li",{staticClass:"image-item",on:{click:function(e){t.showAdvertPicDialog=!0}}},[i("img",{attrs:{src:t.advert.pic,role:"presentation",alt:"",width:"50"}})]):i("li",{staticClass:"el-upload el-upload--advert-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showAdvertPicDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"客户名称",prop:"linkman"}},[i("el-input",{model:{value:t.advert.linkman,callback:function(e){t.$set(t.advert,"linkman","string"==typeof e?e.trim():e)},expression:"advert.linkman"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系方式",prop:"linkTel"}},[i("el-input",{model:{value:t.advert.linkTel,callback:function(e){t.$set(t.advert,"linkTel","string"==typeof e?e.trim():e)},expression:"advert.linkTel"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"广告标题",prop:"title"}},[i("el-input",{model:{value:t.advert.title,callback:function(e){t.$set(t.advert,"title","string"==typeof e?e.trim():e)},expression:"advert.title"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("可以用于备注说明")])],1),t._v(" "),i("el-form-item",{attrs:{label:"广告类型",prop:"frozen"}},[i("el-radio-group",{model:{value:t.advert.type,callback:function(e){t.$set(t.advert,"type",e)},expression:"advert.type"}},[i("el-radio",{attrs:{label:1}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("自营")])]),t._v(" "),i("el-radio",{attrs:{label:2}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("微信")])])],1)],1),t._v(" "),1==t.advert.type?[i("el-form-item",{attrs:{label:"小程序appid",prop:"appid"}},[i("el-input",{model:{value:t.advert.appid,callback:function(e){t.$set(t.advert,"appid","string"==typeof e?e.trim():e)},expression:"advert.appid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"小程序页面",prop:"appPage"}},[i("el-input",{model:{value:t.advert.appPage,callback:function(e){t.$set(t.advert,"appPage","string"==typeof e?e.trim():e)},expression:"advert.appPage"}})],1)]:t._e(),t._v(" "),2==t.advert.type?[i("el-form-item",{attrs:{label:"微信广告主key",prop:"wxadKey"}},[i("el-input",{model:{value:t.advert.wxadKey,callback:function(e){t.$set(t.advert,"wxadKey","string"==typeof e?e.trim():e)},expression:"advert.wxadKey"}})],1)]:t._e(),t._v(" "),i("el-form-item",{attrs:{label:"是否显示",prop:"frozen"}},[i("el-radio-group",{model:{value:t.advert.frozen,callback:function(e){t.$set(t.advert,"frozen",e)},expression:"advert.frozen"}},[i("el-radio",{attrs:{label:1}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("显示")])]),t._v(" "),i("el-radio",{attrs:{label:0}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("隐藏")])])],1)],1)],2),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editAdvertVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.btn_advert_loading,size:"mini"},on:{click:function(e){t.saveAdvert()}}},[t._v("确 定")])],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showAdvertPicDialog},on:{"update:show":function(e){t.showAdvertPicDialog=e},confirm:t.confirmAdvertPic}})],1)},staticRenderFns:[]};var it=i("VU/8")(tt,et,!1,function(t){i("Nd0f")},null,null).exports,st=i("Dd8w"),ot=i.n(st),at=i("NYxO"),nt={name:"poster-list",components:{UploadPhoto:U},computed:ot()({},Object(at.b)(["isShowUpload"])),data:function(){return{editor_imgs:[],showPhotoDialog:!1,btn_loading:!1,btn_desc_loading:!1,activeName:"first",formLabelWidth:"120px",poster:{frozen:!0,isHot:!1,sort:100,content:""},next_disbaled:!0,rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],author:[{required:!0,message:"作者不能为空",trigger:"blur"}],cid:[{required:!0,message:"请选择分类",trigger:"blur"}]},cate_list:[],choose_cate_arr:[]}},created:function(){this.$route.params.type&&(this.poster.type=this.$route.params.type),this.$route.params.id&&(this.poster.id=this.$route.params.id,this.getPosterInfo()),this.getCateList()},methods:ot()({getPosterInfo:function(){var t=this;B(this.poster.id).then(function(e){t.next_disbaled=!1,t.poster=e.poster,t.poster.content=t.poster.content?t.poster.content:"",t.poster.frozen=Boolean(t.poster.frozen),t.getCateList()},function(e){t.$message.error(e.msg)})},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.btn_loading=!0,O(t.poster).then(function(e){t.btn_loading=!1,0===e.code?(t.$message.success("保存成功！"),t.poster.id=e.posterId,1==t.poster.type?(t.activeName="second",t.next_disbaled=!1):t.back()):t.$message.error(e.msg)},function(e){t.btn_loading=!1,t.$message.error(e.msg)}))})},saveDesc:function(){var t=this;this.btn_desc_loading=!0,O({id:this.poster.id,content:this.poster.content}).then(function(e){t.btn_desc_loading=!1,0===e.code?(t.$message.success("保存成功！"),t.activeName="first",t.back()):t.$message.error(e.msg)},function(e){t.btn_desc_loading=!1,t.$message.error(e.msg)})},confirmPhoto:function(t){this.poster.thumb=t[0]},updateData:function(t){this.poster.content=t},back:function(){1==this.poster.type?this.$router.push({path:"/energy/manager/poster"}):this.$router.push({path:"/energy/manager/video"})},getCateList:function(){var t=this;W(this.poster.type).then(function(e){t.getChooseList(e.list,0)},function(e){t.$message.error(e.msg)})},getChooseList:function(t,e){var i=this;t&&(0==e&&(this.cate_list=[]),e+=1,t.forEach(function(t){for(var s=20,o=2;o<=e;o++)s+=20;i.cate_list.push({id:t.id,name:t.name,style:s+"px"}),i.getChooseList(t.list,e)}))}},Object(at.c)(["showUpload"]),{confirmEditorImg:function(t){var e=this;this.showUpload(!1),console.log(t);var i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});M(t).then(function(t){i.close(),t.picArr&&t.picArr.forEach(function(t){e.$refs.editor.execCommand("insertImage",t)})},function(t){i.close(),e.$message.error(t.msg)})},switchEditorShow:function(t){this.showUpload(t)}})},lt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-add-content goods-add-content"},[i("h1",{staticClass:"content__title"},[1==t.poster.type?i("router-link",{attrs:{to:"/energy/manager/poster"}},[t._v("励志文章 ")]):2==t.poster.type?i("router-link",{attrs:{to:"/energy/manager/video"}},[t._v("励志视频 ")]):t._e(),t._v("\n    / "+t._s(t.$route.meta.title)+"\n  ")],1),t._v(" "),i("div",{staticClass:"content__main",staticStyle:{"margin-top":"20px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{staticClass:"main-first",staticStyle:{"padding-bottom":"30px"},attrs:{label:"① 填写基本信息",name:"first"}},[i("div",{staticClass:"section"},[i("el-form",{ref:"EditForm",staticStyle:{width:"600px"},attrs:{rules:t.rules,model:t.poster,"label-width":t.formLabelWidth}},[i("el-form-item",{attrs:{label:1==t.poster.type?"缩略图":"封面图"}},[i("ul",{staticClass:"app-image-list"},[t.poster.thumb?i("li",{staticClass:"image-item",on:{click:function(e){t.showPhotoDialog=!0}}},[i("img",{attrs:{src:t.poster.thumb,role:"presentation",alt:"",width:"80"}})]):i("li",{staticClass:"el-upload el-upload--picture-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"分类",prop:"cid"}},[i("el-select",{attrs:{size:"small",placeholder:"请选择分类"},model:{value:t.poster.cid,callback:function(e){t.$set(t.poster,"cid",e)},expression:"poster.cid"}},t._l(t.cate_list,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),t._v(" "),i("a",{staticClass:"form__button",attrs:{href:"/#/energy/manager/category"}},[t._v("新增分类")])],1),t._v(" "),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{size:"small"},model:{value:t.poster.title,callback:function(e){t.$set(t.poster,"title",e)},expression:"poster.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"作者",prop:"author"}},[i("el-input",{attrs:{size:"small"},model:{value:t.poster.author,callback:function(e){t.$set(t.poster,"author",e)},expression:"poster.author"}})],1),t._v(" "),2==t.poster.type?[i("el-form-item",{attrs:{label:"视频地址",prop:"videoUrl",required:""}},[i("el-input",{attrs:{size:"small"},model:{value:t.poster.videoUrl,callback:function(e){t.$set(t.poster,"videoUrl",e)},expression:"poster.videoUrl"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[i("a",{attrs:{href:"https://shimo.im/doc/ayL4ksdCWgAUZwue?r=08ZY3M",target:"_blank"}},[t._v("如何获取原始视频?")])])],1),t._v(" "),i("el-form-item",{attrs:{label:"视频时长",prop:"duration",required:""}},[i("el-input",{attrs:{size:"small"},model:{value:t.poster.duration,callback:function(e){t.$set(t.poster,"duration",e)},expression:"poster.duration"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("如：05:30")])],1)]:t._e(),t._v(" "),i("el-form-item",{attrs:{label:"简介",prop:"brief"}},[i("el-input",{attrs:{type:"textarea",rows:5,size:"small"},model:{value:t.poster.brief,callback:function(e){t.$set(t.poster,"brief",e)},expression:"poster.brief"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"是否推荐",prop:"isHot"}},[i("el-switch",{attrs:{"active-text":t.poster.isHot?"是":"否"},model:{value:t.poster.isHot,callback:function(e){t.$set(t.poster,"isHot",e)},expression:"poster.isHot"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"分享可得能量",prop:"shareEnergy"}},[i("el-input",{attrs:{size:"small"},model:{value:t.poster.shareEnergy,callback:function(e){t.$set(t.poster,"shareEnergy",e)},expression:"poster.shareEnergy"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("分享该内容，被点击后可得能量")])],1),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[i("el-input",{attrs:{size:"small"},model:{value:t.poster.sort,callback:function(e){t.$set(t.poster,"sort",e)},expression:"poster.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态",prop:"frozen"}},[i("el-switch",{attrs:{"active-text":t.poster.frozen?"发布":"隐藏"},model:{value:t.poster.frozen,callback:function(e){t.$set(t.poster,"frozen",e)},expression:"poster.frozen"}})],1)],2)],1),t._v(" "),i("div",{staticClass:"next-footer",staticStyle:{"margin-left":"120px"}},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.btn_loading},on:{click:t.save}},[t._v(t._s(1==t.poster.type?"保存并下一步":"保存"))]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:t.back}},[t._v("返回")])],1)]),t._v(" "),1==t.poster.type?i("el-tab-pane",{staticStyle:{"padding-bottom":"30px"},attrs:{label:"② 编辑详情",name:"second",disabled:t.next_disbaled}},[i("vue-html5-editor",{ref:"editor",attrs:{content:t.poster.content,"show-module-name":!1,height:500},on:{change:t.updateData}}),t._v(" "),i("div",{staticClass:"next-footer",staticStyle:{"margin-left":"120px","margin-top":"10px"}},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.btn_desc_loading},on:{click:function(e){t.saveDesc()}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.activeName="first"}}},[t._v("上一步")])],1)],1):t._e()],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPhotoDialog},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}}),t._v(" "),i("upload-photo",{attrs:{limit:5,limit_max:!1,show:t.isShowUpload,current_len:t.editor_imgs.length},on:{confirm:t.confirmEditorImg,"update:show":t.switchEditorShow}})],1)},staticRenderFns:[]};var rt=i("VU/8")(nt,lt,!1,function(t){i("L0Ke")},null,null).exports,ct={name:"poster-list",components:{CommonTemplate:S.default,UploadPhoto:U},data:function(){var t=this;return{list:null,req:{cid:0,type:2},page:{pageNo:1,pageSize:20},choose_id_arr:[],cate_list:[],advert:{position:3,sort:1,frozen:!0,type:1,energy:0},btn_advert_loading:!1,showAdvertPicDialog:!1,editAdvertVisible:!1,advertRules:{linkman:[{required:!0,message:"请填写客户名称",trigger:"blur"}],linkTel:[{required:!0,message:"请填写客户联系方式",trigger:"blur"}],title:[{required:!0,message:"请填写广告标题",trigger:"blur"}],appid:[{validator:function(e,i,s){1!=t.advert.type||i?s():s(new Error("请填写小程序appid"))},trigger:"blur"}],wxadKey:[{validator:function(e,i,s){2!=t.advert.type||i?s():s(new Error("请填写微信广告主key"))},trigger:"blur"}]}}},created:function(){this.getList(),this.getCateList(),this.getAdvert()},methods:{getList:function(){var t=this;this.req.p=this.page.pageNo,this.req.s=this.page.pageSize,I(this.req).then(function(e){t.list=e.list,t.list.forEach(function(t){t.frozen=Boolean(t.frozen)}),t.page=e.page},function(e){t.$message.error(e.msg)})},reload:function(){this.page.pageNo=1,this.getList()},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},handleEdit:function(t){this.$router.push({path:"/energy/manager/2/edit/"+t})},changeStatus:function(t,e){var i=this;j([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){K(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})})},getCateList:function(){var t=this;W(2).then(function(e){t.getChooseList(e.list,0)},function(e){t.$message.error(e.msg)})},getChooseList:function(t,e){var i=this;t&&(0==e&&(this.cate_list=[]),e+=1,t.forEach(function(t){for(var s=20,o=2;o<=e;o++)s+=10;i.cate_list.push({id:t.id,name:t.name,style:s+"px"}),i.getChooseList(t.list,e)}))},getAdvert:function(){var t=this;console.log("getadvert"),H(8).then(function(e){t.advert=e.advert},function(e){t.$message.error(e.msg)})},saveAdvert:function(){var t=this;this.$refs.AdvertForm.validate(function(e){e&&(t.btn_advert_loading=!0,G(t.advert).then(function(e){t.btn_advert_loading=!1,0===e.code?(t.editAdvertVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.btn_advert_loading=!1,t.$message.error(e.msg)}))})},handleAdvertEdit:function(){this.editAdvertVisible=!0},confirmAdvertPic:function(t){this.advert.pic=t[0]}}},dt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:[t.advert],"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{label:"广告信息",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[e.row.pic?i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.pic+")"}}):t._e(),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.title))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkman))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkTel))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"广告跳转",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?i("div",[i("p",[t._v("跳转到小程序")]),t._v(" "),i("p",[t._v(t._s(e.row.appid))]),t._v(" "),i("p",[t._v(t._s(e.row.appPage))])]):t._e(),t._v(" "),2==e.row.type?i("div",[i("p",[t._v("对接微信广告")]),t._v(" "),i("p",[t._v(t._s(e.row.wxadKey))])]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"是否显示",align:"center",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.frozen?"已显示":"隐藏中")+"\n          ")]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleAdvertEdit(e.$index)}}},[t._v("编辑")])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.$router.push("/energy/manager/2/add")}}},[t._v("新增视频")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1),t._v(" "),i("div",{staticClass:"operation-right"},[i("el-select",{attrs:{size:"small",placeholder:"全部分类"},on:{change:t.reload},model:{value:t.req.cid,callback:function(e){t.$set(t.req,"cid",e)},expression:"req.cid"}},[i("el-option",{attrs:{value:0,label:"全部分类"}}),t._v(" "),t._l(t.cate_list,function(t,e){return i("el-option",{key:e,style:{"padding-left":t.style},attrs:{label:t.name,value:t.id}})})],2),t._v(" "),i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.reload(e):null}},model:{value:t.req.keywords,callback:function(e){t.$set(t.req,"keywords",e)},expression:"req.keywords"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.reload()}},slot:"append"})],1)],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"视频信息",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.thumb+")"}}),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.title)+" "),1==e.row.isHot?i("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("推荐")]):t._e()],1),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v("栏目："+t._s(e.row.cname))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v("作者："+t._s(e.row.author))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v("分享可得能量："+t._s(e.row.shareEnergy))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"视频地址",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("a",{staticStyle:{color:"#409EFF","text-decoration":"underline"},attrs:{href:e.row.videoUrl,target:"_blank"}},[t._v(t._s(e.row.videoUrl))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"150",label:"发布状态",align:"center",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"已发布":"隐藏中"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"发布时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e()],1)]),t._v(" "),i("el-dialog",{attrs:{title:"详情页广告",visible:t.editAdvertVisible},on:{"update:visible":function(e){t.editAdvertVisible=e}}},[i("el-form",{ref:"AdvertForm",attrs:{model:t.advert,rules:t.advertRules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"图片",prop:"pic"}},[i("ul",{staticClass:"app-image-list"},[t.advert.pic?i("li",{staticClass:"image-item",on:{click:function(e){t.showAdvertPicDialog=!0}}},[i("img",{attrs:{src:t.advert.pic,role:"presentation",alt:"",width:"50"}})]):i("li",{staticClass:"el-upload el-upload--advert-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showAdvertPicDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"客户名称",prop:"linkman"}},[i("el-input",{model:{value:t.advert.linkman,callback:function(e){t.$set(t.advert,"linkman","string"==typeof e?e.trim():e)},expression:"advert.linkman"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系方式",prop:"linkTel"}},[i("el-input",{model:{value:t.advert.linkTel,callback:function(e){t.$set(t.advert,"linkTel","string"==typeof e?e.trim():e)},expression:"advert.linkTel"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"广告标题",prop:"title"}},[i("el-input",{model:{value:t.advert.title,callback:function(e){t.$set(t.advert,"title","string"==typeof e?e.trim():e)},expression:"advert.title"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("可以用于备注说明")])],1),t._v(" "),i("el-form-item",{attrs:{label:"广告类型",prop:"frozen"}},[i("el-radio-group",{model:{value:t.advert.type,callback:function(e){t.$set(t.advert,"type",e)},expression:"advert.type"}},[i("el-radio",{attrs:{label:1}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("自营")])]),t._v(" "),i("el-radio",{attrs:{label:2}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("微信")])])],1)],1),t._v(" "),1==t.advert.type?[i("el-form-item",{attrs:{label:"小程序appid",prop:"appid"}},[i("el-input",{model:{value:t.advert.appid,callback:function(e){t.$set(t.advert,"appid","string"==typeof e?e.trim():e)},expression:"advert.appid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"小程序页面",prop:"appPage"}},[i("el-input",{model:{value:t.advert.appPage,callback:function(e){t.$set(t.advert,"appPage","string"==typeof e?e.trim():e)},expression:"advert.appPage"}})],1)]:t._e(),t._v(" "),2==t.advert.type?[i("el-form-item",{attrs:{label:"微信广告主key",prop:"wxadKey"}},[i("el-input",{model:{value:t.advert.wxadKey,callback:function(e){t.$set(t.advert,"wxadKey","string"==typeof e?e.trim():e)},expression:"advert.wxadKey"}})],1)]:t._e(),t._v(" "),i("el-form-item",{attrs:{label:"是否显示",prop:"frozen"}},[i("el-radio-group",{model:{value:t.advert.frozen,callback:function(e){t.$set(t.advert,"frozen",e)},expression:"advert.frozen"}},[i("el-radio",{attrs:{label:1}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("显示")])]),t._v(" "),i("el-radio",{attrs:{label:0}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("隐藏")])])],1)],1)],2),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editAdvertVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.btn_advert_loading,size:"mini"},on:{click:function(e){t.saveAdvert()}}},[t._v("确 定")])],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showAdvertPicDialog},on:{"update:show":function(e){t.showAdvertPicDialog=e},confirm:t.confirmAdvertPic}})],1)},staticRenderFns:[]};var ut=i("VU/8")(ct,dt,!1,function(t){i("AKIl")},null,null).exports,pt=function(t){return u.a.post("/picture/list",t)},mt=function(t){return u.a.post("/picture/save",t)},ft=function(t){return u.a.post("/picture/delete",t)},ht=function(t,e){return u.a.post("/picture/publish/"+e,t)},gt=function(){return u.a.post("/picture/advert",{})},_t={name:"pic-list",components:{CommonTemplate:S.default,UploadPhoto:U},data:function(){var t=this;return{showPhotoDialog:!1,loading:!1,editVisible:!1,list:null,picture:{},req:{},page:{pageNo:1,pageSize:20},choose_id_arr:[],rules:{pic:[{required:!0,message:"请上传图片",trigger:"blur"}]},advert:{position:3,sort:1,frozen:!0,type:1,energy:0},btn_advert_loading:!1,showAdvertPicDialog:!1,editAdvertVisible:!1,advertRules:{linkman:[{required:!0,message:"请填写客户名称",trigger:"blur"}],linkTel:[{required:!0,message:"请填写客户联系方式",trigger:"blur"}],title:[{required:!0,message:"请填写广告标题",trigger:"blur"}],appid:[{validator:function(e,i,s){1!=t.advert.type||i?s():s(new Error("请填写小程序appid"))},trigger:"blur"}],wxadKey:[{validator:function(e,i,s){2!=t.advert.type||i?s():s(new Error("请填写微信广告主key"))},trigger:"blur"}]}}},created:function(){this.getList(),this.getAdvert()},methods:{getList:function(){var t=this;this.req.p=this.page.pageNo,this.req.s=this.page.pageSize,pt(this.req).then(function(e){t.list=e.list?e.list:[],t.list.forEach(function(t){t.frozen=Boolean(t.frozen)}),t.page=e.page},function(e){t.$message.error(e.msg)})},reload:function(){this.page.pageNo=1,this.getList()},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},handleAdd:function(){this.editVisible=!0,this.picture={frozen:!0,sort:100}},handleEdit:function(t){this.editVisible=!0,this.picture=this.list[t]},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.loading=!0,mt(t.picture).then(function(e){t.loading=!1,0===e.code?(t.editVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.loading=!1,t.$message.error(e.msg)}))})},changeStatus:function(t,e){var i=this;ht([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){ft(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})})},confirmPhoto:function(t){this.picture.pic=t[0]},getAdvert:function(){var t=this;gt().then(function(e){t.advert=e.advert},function(e){t.$message.error(e.msg)})},saveAdvert:function(){var t=this;this.$refs.AdvertForm.validate(function(e){e&&(t.btn_advert_loading=!0,G(t.advert).then(function(e){t.btn_advert_loading=!1,0===e.code?(t.editAdvertVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.btn_advert_loading=!1,t.$message.error(e.msg)}))})},handleAdvertEdit:function(){this.editAdvertVisible=!0},confirmAdvertPic:function(t){this.advert.pic=t[0]}}},vt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:[t.advert],"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{label:"广告信息",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[e.row.pic?i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.pic+")"}}):t._e(),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.title))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkman))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkTel))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"广告跳转",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?i("div",[i("p",[t._v("跳转到小程序")]),t._v(" "),i("p",[t._v(t._s(e.row.appid))]),t._v(" "),i("p",[t._v(t._s(e.row.appPage))])]):t._e(),t._v(" "),2==e.row.type?i("div",[i("p",[t._v("对接微信广告")]),t._v(" "),i("p",[t._v(t._s(e.row.wxadKey))])]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleAdvertEdit(e.$index)}}},[t._v("编辑")])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新增图片")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"图片",align:"left"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{attrs:{src:t.row.pic,width:"50"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"下载量",align:"center",prop:"downNum"}}),t._v(" "),i("el-table-column",{attrs:{label:"排序",align:"center",prop:"sort"}}),t._v(" "),i("el-table-column",{attrs:{label:"发布状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"已发布":"隐藏中"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.$index)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e()],1)]),t._v(" "),i("el-dialog",{attrs:{title:"励志美图",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"EditForm",attrs:{model:t.picture,rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"图片",prop:"pic"}},[i("ul",{staticClass:"app-image-list"},[t.picture.pic?i("li",{staticClass:"image-item",on:{click:function(e){t.showPhotoDialog=!0}}},[i("img",{attrs:{src:t.picture.pic,role:"presentation",alt:"",width:"40"}})]):i("li",{staticClass:"el-upload el-upload--picture-card",staticStyle:{width:"40px",height:"40px","line-height":"1"},on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"20px","margin-top":"10px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[i("el-input",{attrs:{size:"small"},model:{value:t.picture.sort,callback:function(e){t.$set(t.picture,"sort",e)},expression:"picture.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态",prop:"frozen"}},[i("el-switch",{attrs:{"active-text":t.picture.frozen?"显示中":"已冻结"},model:{value:t.picture.frozen,callback:function(e){t.$set(t.picture,"frozen",e)},expression:"picture.frozen"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading,size:"mini"},on:{click:function(e){t.save()}}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"美图广告",visible:t.editAdvertVisible},on:{"update:visible":function(e){t.editAdvertVisible=e}}},[i("el-form",{ref:"AdvertForm",attrs:{model:t.advert,rules:t.advertRules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"图片",prop:"pic"}},[i("ul",{staticClass:"app-image-list"},[t.advert.pic?i("li",{staticClass:"image-item",on:{click:function(e){t.showAdvertPicDialog=!0}}},[i("img",{attrs:{src:t.advert.pic,role:"presentation",alt:"",width:"50"}})]):i("li",{staticClass:"el-upload el-upload--advert-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showAdvertPicDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"客户名称",prop:"linkman"}},[i("el-input",{model:{value:t.advert.linkman,callback:function(e){t.$set(t.advert,"linkman","string"==typeof e?e.trim():e)},expression:"advert.linkman"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系方式",prop:"linkTel"}},[i("el-input",{model:{value:t.advert.linkTel,callback:function(e){t.$set(t.advert,"linkTel","string"==typeof e?e.trim():e)},expression:"advert.linkTel"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"广告标题",prop:"title"}},[i("el-input",{model:{value:t.advert.title,callback:function(e){t.$set(t.advert,"title","string"==typeof e?e.trim():e)},expression:"advert.title"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("可以用于备注说明")])],1),t._v(" "),i("el-form-item",{attrs:{label:"广告类型",prop:"frozen"}},[i("el-radio-group",{model:{value:t.advert.type,callback:function(e){t.$set(t.advert,"type",e)},expression:"advert.type"}},[i("el-radio",{attrs:{label:1}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("自营")])]),t._v(" "),i("el-radio",{attrs:{label:2}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("微信")])])],1)],1),t._v(" "),1==t.advert.type?[i("el-form-item",{attrs:{label:"小程序appid",prop:"appid"}},[i("el-input",{model:{value:t.advert.appid,callback:function(e){t.$set(t.advert,"appid","string"==typeof e?e.trim():e)},expression:"advert.appid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"小程序页面",prop:"appPage"}},[i("el-input",{model:{value:t.advert.appPage,callback:function(e){t.$set(t.advert,"appPage","string"==typeof e?e.trim():e)},expression:"advert.appPage"}})],1)]:t._e(),t._v(" "),2==t.advert.type?[i("el-form-item",{attrs:{label:"微信广告主key",prop:"wxadKey"}},[i("el-input",{model:{value:t.advert.wxadKey,callback:function(e){t.$set(t.advert,"wxadKey","string"==typeof e?e.trim():e)},expression:"advert.wxadKey"}})],1)]:t._e()],2),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editAdvertVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.btn_advert_loading,size:"mini"},on:{click:function(e){t.saveAdvert()}}},[t._v("确 定")])],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPhotoDialog},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}}),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showAdvertPicDialog},on:{"update:show":function(e){t.showAdvertPicDialog=e},confirm:t.confirmAdvertPic}})],1)},staticRenderFns:[]};var bt=i("VU/8")(_t,vt,!1,function(t){i("AVo2")},null,null).exports,yt=function(t){return u.a.post("/category/list",t)},wt=function(t){return u.a.post("/category/save",t)},kt=function(t){return u.a.post("/category/delete",t)},xt={name:"category-list",components:{CommonTemplate:S.default,UploadPhoto:U},watch:{filterText:function(t){this.$refs.trees.filter(t)}},data:function(){return{showPhotoDialog:!1,editVisible:!1,filterText:"",formLabelWidth:"100px",category:{frozen:1},list:null,choose_list:[],batchArr:[],req:{type:0}}},created:function(){this.getCategoryList()},methods:{renderContent:function(t,e){var i=this,s=e.node;e.data,e.store;return t("div",{class:"custom-tree-node"},[t("img",{attrs:{src:s.data.icon,width:"20"}}),t("span",[s.data.name]),t("span",[1==s.data.type?"文章类型":"视频类型"]),t("div",[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return i.edit(s.data.idx)}}},["修改"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return i.deleteOne(s.data.id)}}},["删除"])])])},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},handleCheckChange:function(t,e,i){},getCategoryList:function(){var t=this;this.list=null,yt(this.req).then(function(e){t.convertDtoList(e.list),t.list=e.list,t.getChooseList(t.list,0)},function(e){t.list=[],t.$message.error(e.msg)})},convertDtoList:function(t){var e=this;t&&t.forEach(function(t){t.list&&(t.children=t.list,t.list=null,e.convertDtoList(t.children))})},getChooseList:function(t,e){var i=this;if(t&&0!==t.length){if(0===e)this.list=[];else if(2===e)return;e+=1,t.forEach(function(t,s){var o=t.list;t.idx=s,t.tip=2===e?"\r\t\r\t":"",t.frozen=Boolean(t.frozen),t.list=null,i.list.push(t),o&&i.getChooseList(t.list,e)})}},add:function(){this.category={frozen:!0,sort:100,type:1},this.editVisible=!0},edit:function(t){this.editVisible=!0,this.category=this.list[t]},confirmPhoto:function(t){this.category.icon=t[0]},batchDelete:function(){var t=this,e=this.$refs.trees.getCheckedNodes().map(function(t){return t.id});0!==e.length?this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){kt(e).then(function(e){t.$message.success("操作成功"),t.editVisible=!1,t.getCategoryList()},function(e){t.$message.error(e.msg)})}).catch(function(){}):this.$message.error("请至少选择一个分类进行删除！")},deleteOne:function(t){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){kt([t]).then(function(t){e.$message.success("删除成功"),e.editVisible=!1,e.getCategoryList()},function(t){e.$message.error(t.msg)})}).catch(function(){})},save:function(){var t=this;null!=this.category.name&&""!=this.category.name?this.category.name.length>6?this.$message.error("分类名称不能超过5个字"):(""==this.category.sort&&(this.category.sort=100),wt(this.category).then(function(e){t.$message.success("保存成功"),t.editVisible=!1,t.getCategoryList()},function(e){t.$message.error(e.msg)})):this.$message.error("请输入分类名称")}}},Ct={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.add}},[t._v("新建分类")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:t.batchDelete}},[t._v("批量删除")])],1),t._v(" "),i("div",{staticClass:"operation-right"},[i("el-select",{attrs:{size:"small",placeholder:"全部类型"},on:{change:t.getCategoryList},model:{value:t.req.type,callback:function(e){t.$set(t.req,"type",e)},expression:"req.type"}},[i("el-option",{attrs:{value:0,label:"全部类型"}}),t._v(" "),i("el-option",{attrs:{value:1,label:"文章类型"}}),t._v(" "),i("el-option",{attrs:{value:2,label:"视频类型"}})],1),t._v(" "),i("el-input",{attrs:{size:"small",placeholder:"分类名称"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)]),t._v(" "),i("div",{attrs:{slot:"list"},slot:"list"},[i("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"trees",staticClass:"filter-tree",staticStyle:{width:"500px"},attrs:{data:t.list,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":t.renderContent,"filter-node-method":t.filterNode},on:{"check-change":t.handleCheckChange}})],1)]),t._v(" "),i("el-dialog",{attrs:{title:"分类信息",visible:t.editVisible,width:"40%"},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.category,"label-width":t.formLabelWidth}},[i("el-form-item",{attrs:{label:"分类图片"}},[i("ul",{staticClass:"app-image-list"},[t.category.icon?i("li",{staticClass:"image-item",on:{click:function(e){t.showPhotoDialog=!0}}},[i("img",{attrs:{src:t.category.icon,role:"presentation",alt:"",width:"40"}})]):i("li",{staticClass:"el-upload el-upload--picture-card",staticStyle:{width:"40px",height:"40px","line-height":"1"},on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"20px","margin-top":"10px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"分类名称",prop:"name",required:""}},[i("el-input",{attrs:{size:"small"},model:{value:t.category.name,callback:function(e){t.$set(t.category,"name",e)},expression:"category.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"类型"}},[i("div",[i("el-radio-group",{attrs:{disabled:null!=t.category.id},model:{value:t.category.type,callback:function(e){t.$set(t.category,"type",e)},expression:"category.type"}},[i("el-radio",{attrs:{label:1}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("文章类型")])]),t._v(" "),i("el-radio",{attrs:{label:2}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("视频类型")])])],1)],1)]),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort",required:""}},[i("el-input",{attrs:{size:"small"},model:{value:t.category.sort,callback:function(e){t.$set(t.category,"sort",e)},expression:"category.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态"}},[i("el-switch",{attrs:{"active-text":t.category.frozen?"显示":"隐藏"},model:{value:t.category.frozen,callback:function(e){t.$set(t.category,"frozen",e)},expression:"category.frozen"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPhotoDialog},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}})],1)},staticRenderFns:[]};var zt=i("VU/8")(xt,Ct,!1,function(t){i("faVD")},null,null).exports,$t=function(){return u.a.post("/tag/list",{})},St=function(t){return u.a.post("/tag/save",t)},Pt={name:"tag-list",components:{CommonTemplate:S.default},watch:{filterText:function(t){this.$refs.trees.filter(t)}},data:function(){return{editVisible:!1,filterText:"",formLabelWidth:"100px",tag:{name:""},list:null,choose_id_arr:[]}},created:function(){this.getList()},methods:{renderContent:function(t,e){var i=this,s=e.node;e.data,e.store;return t("div",{class:"custom-tree-node"},[t("span",[s.data.name]),t("div",[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return i.edit(s.data.idx)}}},["修改"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return i.deleteOne(s.data.idx)}}},["删除"])])])},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},getList:function(){var t=this;this.list=null,$t().then(function(e){t.list=e.list,t.list=t.list.map(function(t,e){return{idx:e,id:e+1,name:t}})},function(e){t.list=[],t.$message.error(e.msg)})},save:function(){var t=this;if(null!=this.tag.name&&""!=this.tag.name){var e=this.list.map(function(t){return t.name});this.tag.id||e.push(this.tag.name),St(e).then(function(e){t.$message.success("保存成功"),t.editVisible=!1,t.tag={},t.getList()},function(e){t.$message.error(e.msg)})}else this.$message.error("请输入名称")},add:function(){this.editVisible=!0,this.tag={name:""}},edit:function(t){this.editVisible=!0,this.tag=this.list[t]},deleteOne:function(t){var e=this;this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.list.splice(t,1);var i=e.list.map(function(t){return t.name});St(i).then(function(t){e.$message.success("保存成功"),e.editVisible=!1,e.tag={},e.getList()},function(t){e.$message.error(t.msg)})})}}},qt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.add}},[t._v("新建标签")])],1),t._v(" "),i("div",{staticClass:"operation-right"},[i("el-input",{attrs:{size:"small",placeholder:"分类名称"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)]),t._v(" "),i("div",{attrs:{slot:"list"},slot:"list"},[i("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"trees",staticClass:"filter-tree",staticStyle:{width:"500px"},attrs:{data:t.list,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":t.renderContent,"filter-node-method":t.filterNode}})],1)]),t._v(" "),i("el-dialog",{attrs:{title:"标签信息",visible:t.editVisible,width:"40%"},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.tag,"label-width":t.formLabelWidth}},[i("el-form-item",{attrs:{label:"标签名称",prop:"name",required:""}},[i("el-input",{attrs:{size:"small"},model:{value:t.tag.name,callback:function(e){t.$set(t.tag,"name",e)},expression:"tag.name"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Tt=i("VU/8")(Pt,qt,!1,function(t){i("WVyz")},null,null).exports,Nt={name:"advert-list",components:{CommonTemplate:S.default,UploadPhoto:U},data:function(){var t=this;return{showPhotoDialog:!1,loading:!1,editVisible:!1,list:null,advert:{position:5,sort:100,frozen:!0},req:{},choose_id_arr:[],rules:{linkman:[{required:!0,message:"请填写客户名称",trigger:"blur"}],linkTel:[{required:!0,message:"请填写客户联系方式",trigger:"blur"}],title:[{required:!0,message:"请填写广告标题",trigger:"blur"}],appid:[{validator:function(e,i,s){1!=t.advert.type||i?s():s(new Error("请填写小程序appid"))},trigger:"blur"}],wxadKey:[{validator:function(e,i,s){2!=t.advert.type||i?s():s(new Error("请填写微信广告主key"))},trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var t=this;J(this.req).then(function(e){t.list=e.list?e.list:[],t.list.forEach(function(t){t.frozen=Boolean(t.frozen)})},function(e){t.$message.error(e.msg)})},reload:function(){this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},handleAdd:function(){this.editVisible=!0,this.advert={position:5,sort:100,frozen:!0,type:1}},handleEdit:function(t){this.editVisible=!0,this.advert=this.list[t]},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.loading=!0,G(t.advert).then(function(e){t.loading=!1,0===e.code?(t.editVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.loading=!1,t.$message.error(e.msg)}))})},changeStatus:function(t,e){var i=this;Z([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Q(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})})},confirmPhoto:function(t){this.advert.pic=t[0]}}},Lt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新增广告")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"广告信息",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[e.row.pic?i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.pic+")"}}):t._e(),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.title)+" "),i("el-tag",{attrs:{size:"mini",type:1==e.row.type?"warning":"danger"}},[t._v(t._s(1==e.row.type?"自营":"微信"))])],1),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkman))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkTel))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"广告位置",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(5==e.row.position?"文章列表页":"视频列表页"))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"广告跳转",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?i("div",[i("p",[t._v("跳转到小程序")]),t._v(" "),i("p",[t._v(t._s(e.row.appid))]),t._v(" "),i("p",[t._v(t._s(e.row.appPage))])]):t._e(),t._v(" "),2==e.row.type?i("div",[i("p",[t._v("对接微信广告")]),t._v(" "),i("p",[t._v(t._s(e.row.wxadKey))])]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"80",label:"排序",align:"center",prop:"sort"}}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"发布状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"已发布":"隐藏中"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{width:"150",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.$index)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)]),t._v(" "),i("el-dialog",{attrs:{title:"广告福利",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"EditForm",attrs:{model:t.advert,rules:t.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"图片",prop:"pic"}},[i("ul",{staticClass:"app-image-list"},[t.advert.pic?i("li",{staticClass:"image-item",on:{click:function(e){t.showPhotoDialog=!0}}},[i("img",{attrs:{src:t.advert.pic,role:"presentation",alt:"",width:"50"}})]):i("li",{staticClass:"el-upload el-upload--advert-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"客户名称",prop:"linkman"}},[i("el-input",{model:{value:t.advert.linkman,callback:function(e){t.$set(t.advert,"linkman","string"==typeof e?e.trim():e)},expression:"advert.linkman"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系方式",prop:"linkTel"}},[i("el-input",{model:{value:t.advert.linkTel,callback:function(e){t.$set(t.advert,"linkTel","string"==typeof e?e.trim():e)},expression:"advert.linkTel"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"广告标题",prop:"title"}},[i("el-input",{model:{value:t.advert.title,callback:function(e){t.$set(t.advert,"title","string"==typeof e?e.trim():e)},expression:"advert.title"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("可以用于备注说明")])],1),t._v(" "),i("el-form-item",{attrs:{label:"广告位置",prop:"position"}},[i("el-radio-group",{model:{value:t.advert.position,callback:function(e){t.$set(t.advert,"position",e)},expression:"advert.position"}},[i("el-radio",{attrs:{label:5}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("文章列表")])]),t._v(" "),i("el-radio",{attrs:{label:6}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("视频列表")])])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"广告类型",prop:"type"}},[i("el-radio-group",{model:{value:t.advert.type,callback:function(e){t.$set(t.advert,"type",e)},expression:"advert.type"}},[i("el-radio",{attrs:{label:1}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("自营")])]),t._v(" "),i("el-radio",{attrs:{label:2}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("微信")])])],1)],1),t._v(" "),1==t.advert.type?[i("el-form-item",{attrs:{label:"小程序appid",prop:"appid"}},[i("el-input",{model:{value:t.advert.appid,callback:function(e){t.$set(t.advert,"appid","string"==typeof e?e.trim():e)},expression:"advert.appid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"小程序页面",prop:"appPage"}},[i("el-input",{model:{value:t.advert.appPage,callback:function(e){t.$set(t.advert,"appPage","string"==typeof e?e.trim():e)},expression:"advert.appPage"}})],1)]:t._e(),t._v(" "),2==t.advert.type?[i("el-form-item",{attrs:{label:"微信广告主key",prop:"wxadKey"}},[i("el-input",{model:{value:t.advert.wxadKey,callback:function(e){t.$set(t.advert,"wxadKey","string"==typeof e?e.trim():e)},expression:"advert.wxadKey"}})],1)]:t._e(),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[i("el-input",{attrs:{size:"small"},model:{value:t.advert.sort,callback:function(e){t.$set(t.advert,"sort",e)},expression:"advert.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态",prop:"frozen"}},[i("el-switch",{attrs:{"active-text":t.advert.frozen?"显示中":"已冻结"},model:{value:t.advert.frozen,callback:function(e){t.$set(t.advert,"frozen",e)},expression:"advert.frozen"}})],1)],2),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading,size:"mini"},on:{click:function(e){t.save()}}},[t._v("确 定")])],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPhotoDialog},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}})],1)},staticRenderFns:[]};var Et=i("VU/8")(Nt,Lt,!1,function(t){i("KYI3")},null,null).exports,Rt=function(t){return u.a.post("/quotes/list",t)},Dt=function(t){return u.a.post("/quotes/save",t)},At=function(t){return u.a.post("/quotes/delete",t)},Vt=function(t,e){return u.a.post("/quotes/publish/"+e,t)},Ft={name:"quotes-list",components:{CommonTemplate:S.default,UploadPhoto:U},data:function(){return{showPhotoDialog:!1,loading:!1,editVisible:!1,list:null,quotes:{sort:100,frozen:!0},req:{},choose_id_arr:[],rules:{photo:[{required:!0,message:"请上传头像",trigger:"blur"}],content:[{required:!0,message:"请填写语录内容",trigger:"blur"}],username:[{required:!0,message:"请填写署名",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var t=this;Rt(this.req).then(function(e){t.list=e.list?e.list:[],t.list.forEach(function(t){t.frozen=Boolean(t.frozen)})},function(e){t.$message.error(e.msg)})},reload:function(){this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},handleAdd:function(){this.editVisible=!0,this.quotes={sort:100,frozen:!0}},handleEdit:function(t){this.editVisible=!0,this.quotes=this.list[t]},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.loading=!0,Dt(t.quotes).then(function(e){t.loading=!1,0===e.code?(t.editVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.loading=!1,t.$message.error(e.msg)}))})},changeStatus:function(t,e){var i=this;Vt([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){At(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})})},confirmPhoto:function(t){this.quotes.photo=t[0]}}},Ut={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新增语录")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"发布者",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[e.row.photo?i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.photo+")"}}):t._e(),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.username)+" "),i("el-tag",{attrs:{size:"mini",type:e.row.memberId?"warning":"danger"}},[t._v(t._s(e.row.memberId?"微信用户":"平台"))])],1),t._v(" "),i("p",{staticClass:"item__info-sub"})])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"语录内容",align:"center",prop:"content"}}),t._v(" "),i("el-table-column",{attrs:{label:"点赞数",align:"center",prop:"zanNum"}}),t._v(" "),i("el-table-column",{attrs:{width:"80",label:"排序",align:"center",prop:"sort"}}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"发布状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"已发布":"隐藏中"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{width:"150",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.$index)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)]),t._v(" "),i("el-dialog",{attrs:{title:"励志语录",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"EditForm",attrs:{model:t.quotes,rules:t.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"头像",prop:"photo"}},[i("ul",{staticClass:"app-image-list"},[t.quotes.photo?i("li",{staticClass:"image-item",on:{click:function(e){t.showPhotoDialog=!0}}},[i("img",{attrs:{src:t.quotes.photo,role:"presentation",alt:"",width:"50"}})]):i("li",{staticClass:"el-upload el-upload--quotes-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"署名",prop:"username"}},[i("el-input",{model:{value:t.quotes.username,callback:function(e){t.$set(t.quotes,"username","string"==typeof e?e.trim():e)},expression:"quotes.username"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"内容",prop:"content"}},[i("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.quotes.content,callback:function(e){t.$set(t.quotes,"content","string"==typeof e?e.trim():e)},expression:"quotes.content"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"点赞数",prop:"zanNum"}},[i("el-input",{model:{value:t.quotes.zanNum,callback:function(e){t.$set(t.quotes,"zanNum","string"==typeof e?e.trim():e)},expression:"quotes.zanNum"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[i("el-input",{attrs:{size:"small"},model:{value:t.quotes.sort,callback:function(e){t.$set(t.quotes,"sort",e)},expression:"quotes.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态",prop:"frozen"}},[i("el-switch",{attrs:{"active-text":t.quotes.frozen?"显示中":"已冻结"},model:{value:t.quotes.frozen,callback:function(e){t.$set(t.quotes,"frozen",e)},expression:"quotes.frozen"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading,size:"mini"},on:{click:function(e){t.save()}}},[t._v("确 定")])],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPhotoDialog},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}})],1)},staticRenderFns:[]};var It={path:"/energy",name:"励志管理",icon:"el-icon-news",component:A,hidden_child:!1,children:[{name:"励志管理",path:"manager",component:R,children:[{name:"励志文章",path:"poster",component:it,meta:{title:"文章列表"}},{name:"励志视频",path:"video",component:ut,meta:{title:"视频列表"}},{exclude:!0,path:":type/add",component:rt,meta:{title:"添加信息"}},{exclude:!0,path:":type/edit/:id",component:rt,meta:{title:"编辑信息"}},{name:"励志语录",path:"quotes",component:i("VU/8")(Ft,Ut,!1,function(t){i("Qkdc")},null,null).exports,meta:{title:"励志语录"}},{name:"励志美图",path:"picture",component:bt,meta:{title:"美图列表"}},{name:"分类管理",path:"category",component:zt,meta:{title:"分类列表"}},{name:"列表广告",path:"advert",component:Et,meta:{title:"列表广告"}},{name:"热门标签",path:"tag",component:Tt,meta:{title:"热门标签"}}],redirect:"/energy/manager/poster"}],redirect:"/energy/manager"},Bt={name:"router",data:function(){return{route:ke}},components:{SecondRouter:w}},Ot={render:function(){var t=this.$createElement;return(this._self._c||t)("SecondRouter",{attrs:{"route-info":this.route}})},staticRenderFns:[]},Kt=i("VU/8")(Bt,Ot,!1,null,null,null).exports,jt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"setting"}},[e("router-view")],1)},staticRenderFns:[]};var Wt=i("VU/8")({},jt,!1,function(t){i("lHVt")},null,null).exports,Ht={name:"advert-list",components:{CommonTemplate:S.default,UploadPhoto:U},data:function(){var t=this;return{showPhotoDialog:!1,loading:!1,editVisible:!1,list:null,advert:{position:2,sort:100,frozen:!0},req:{position:2},page:{pageNo:1,pageSize:20},choose_id_arr:[],rules:{linkman:[{required:!0,message:"请填写客户名称",trigger:"blur"}],linkTel:[{required:!0,message:"请填写客户联系方式",trigger:"blur"}],title:[{required:!0,message:"请填写广告标题",trigger:"blur"}],energy:[{required:!0,message:"请填写可领取的能量",trigger:"blur"}],appid:[{validator:function(e,i,s){1!=t.advert.type||i?s():s(new Error("请填写小程序appid"))},trigger:"blur"}],wxadKey:[{validator:function(e,i,s){2!=t.advert.type||i?s():s(new Error("请填写微信广告主key"))},trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.req.p=this.page.pageNo,this.req.s=this.page.pageSize,Y(this.req).then(function(e){t.list=e.list?e.list:[],t.list.forEach(function(t){t.frozen=Boolean(t.frozen)}),t.page=e.page},function(e){t.$message.error(e.msg)})},reload:function(){this.page.pageNo=1,this.getList()},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},handleAdd:function(){this.editVisible=!0,this.advert={position:2,sort:100,frozen:!0,type:1}},handleEdit:function(t){this.editVisible=!0,this.advert=this.list[t]},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.loading=!0,G(t.advert).then(function(e){t.loading=!1,0===e.code?(t.editVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.loading=!1,t.$message.error(e.msg)}))})},changeStatus:function(t,e){var i=this;Z([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Q(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})})},handleReset:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("重置后用户可重新点击广告获取能量，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){X(i).then(function(t){e.$message.success("操作成功"),e.choose_id_arr=[],e.toggleSelection()},function(t){e.$message.error(t.msg)})})},confirmPhoto:function(t){this.advert.pic=t[0]}}},Mt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新增广告福利")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleReset(0)}}},[t._v("批量重置")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"广告信息",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[e.row.pic?i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.pic+")"}}):t._e(),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.title)+" "),i("el-tag",{attrs:{size:"mini",type:1==e.row.type?"warning":"danger"}},[t._v(t._s(1==e.row.type?"自营":"微信"))])],1),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkman))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkTel))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"广告跳转",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?i("div",[i("p",[t._v("跳转到小程序")]),t._v(" "),i("p",[t._v(t._s(e.row.appid))]),t._v(" "),i("p",[t._v(t._s(e.row.appPage))])]):t._e(),t._v(" "),2==e.row.type?i("div",[i("p",[t._v("对接微信广告")]),t._v(" "),i("p",[t._v(t._s(e.row.wxadKey))])]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"可领取能量",align:"center",prop:"energy"}}),t._v(" "),i("el-table-column",{attrs:{width:"80",label:"排序",align:"center",prop:"sort"}}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"发布状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"已发布":"隐藏中"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{width:"250",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.$index)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){t.handleReset(e.row.id)}}},[t._v("重置")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e()],1)]),t._v(" "),i("el-dialog",{attrs:{title:"广告福利",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"EditForm",attrs:{model:t.advert,rules:t.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"图片",prop:"pic"}},[i("ul",{staticClass:"app-image-list"},[t.advert.pic?i("li",{staticClass:"image-item",on:{click:function(e){t.showPhotoDialog=!0}}},[i("img",{attrs:{src:t.advert.pic,role:"presentation",alt:"",width:"50"}})]):i("li",{staticClass:"el-upload el-upload--advert-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"客户名称",prop:"linkman"}},[i("el-input",{model:{value:t.advert.linkman,callback:function(e){t.$set(t.advert,"linkman","string"==typeof e?e.trim():e)},expression:"advert.linkman"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系方式",prop:"linkTel"}},[i("el-input",{model:{value:t.advert.linkTel,callback:function(e){t.$set(t.advert,"linkTel","string"==typeof e?e.trim():e)},expression:"advert.linkTel"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"广告标题",prop:"title"}},[i("el-input",{model:{value:t.advert.title,callback:function(e){t.$set(t.advert,"title","string"==typeof e?e.trim():e)},expression:"advert.title"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("可以用于备注说明")])],1),t._v(" "),i("el-form-item",{attrs:{label:"广告类型",prop:"frozen"}},[i("el-radio-group",{model:{value:t.advert.type,callback:function(e){t.$set(t.advert,"type",e)},expression:"advert.type"}},[i("el-radio",{attrs:{label:1}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("自营")])]),t._v(" "),i("el-radio",{attrs:{label:2}},[i("span",{staticStyle:{"font-weight":"normal"}},[t._v("微信")])])],1)],1),t._v(" "),1==t.advert.type?[i("el-form-item",{attrs:{label:"小程序appid",prop:"appid"}},[i("el-input",{model:{value:t.advert.appid,callback:function(e){t.$set(t.advert,"appid","string"==typeof e?e.trim():e)},expression:"advert.appid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"小程序页面",prop:"appPage"}},[i("el-input",{model:{value:t.advert.appPage,callback:function(e){t.$set(t.advert,"appPage","string"==typeof e?e.trim():e)},expression:"advert.appPage"}})],1)]:t._e(),t._v(" "),2==t.advert.type?[i("el-form-item",{attrs:{label:"微信广告主key",prop:"wxadKey"}},[i("el-input",{model:{value:t.advert.wxadKey,callback:function(e){t.$set(t.advert,"wxadKey","string"==typeof e?e.trim():e)},expression:"advert.wxadKey"}})],1)]:t._e(),t._v(" "),i("el-form-item",{attrs:{label:"可领取的能量值",prop:"energy"}},[i("el-input",{attrs:{size:"small"},model:{value:t.advert.energy,callback:function(e){t.$set(t.advert,"energy",e)},expression:"advert.energy"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("同个广告，每个用户只能领取一次？")])],1),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[i("el-input",{attrs:{size:"small"},model:{value:t.advert.sort,callback:function(e){t.$set(t.advert,"sort",e)},expression:"advert.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态",prop:"frozen"}},[i("el-switch",{attrs:{"active-text":t.advert.frozen?"显示中":"已冻结"},model:{value:t.advert.frozen,callback:function(e){t.$set(t.advert,"frozen",e)},expression:"advert.frozen"}})],1)],2),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading,size:"mini"},on:{click:function(e){t.save()}}},[t._v("确 定")])],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPhotoDialog},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}})],1)},staticRenderFns:[]};var Yt=i("VU/8")(Ht,Mt,!1,function(t){i("Qx0i")},null,null).exports,Jt={name:"advert-list",components:{CommonTemplate:S.default,UploadPhoto:U},data:function(){return{showPhotoDialog:!1,loading:!1,editVisible:!1,list:null,advert:{position:1,sort:100,frozen:!0,type:1},req:{position:1},page:{pageNo:1,pageSize:20},choose_id_arr:[],rules:{linkman:[{required:!0,message:"请填写客户名称",trigger:"blur"}],linkTel:[{required:!0,message:"请填写客户联系方式",trigger:"blur"}],title:[{required:!0,message:"请填写广告标题",trigger:"blur"}],energy:[{required:!0,message:"请填写可领取的能量",trigger:"blur"}],appid:[{required:!0,message:"请填写小程序appid",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.req.p=this.page.pageNo,this.req.s=this.page.pageSize,Y(this.req).then(function(e){t.list=e.list?e.list:[],t.list.forEach(function(t){t.frozen=Boolean(t.frozen)}),t.page=e.page},function(e){t.$message.error(e.msg)})},reload:function(){this.page.pageNo=1,this.getList()},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},handleAdd:function(){this.editVisible=!0,this.advert={position:1,sort:100,frozen:!0,type:1}},handleEdit:function(t){this.editVisible=!0,this.advert=this.list[t]},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.loading=!0,G(t.advert).then(function(e){t.loading=!1,0===e.code?(t.editVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.loading=!1,t.$message.error(e.msg)}))})},changeStatus:function(t,e){var i=this;Z([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Q(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})})},confirmPhoto:function(t){this.advert.pic=t[0]}}},Gt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新增广告")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"广告信息",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[e.row.pic?i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.pic+")"}}):t._e(),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.title))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkman))]),t._v(" "),i("p",{staticClass:"item__info-sub"},[t._v(t._s(e.row.linkTel))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"广告跳转",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[i("p",[t._v("跳转到小程序")]),t._v(" "),i("p",[t._v(t._s(e.row.appid))]),t._v(" "),i("p",[t._v(t._s(e.row.appPage))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"可领取能量",align:"center",prop:"energy"}}),t._v(" "),i("el-table-column",{attrs:{width:"80",label:"排序",align:"center",prop:"sort"}}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"发布状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"已发布":"隐藏中"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.$index)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e()],1)]),t._v(" "),i("el-dialog",{attrs:{title:"广告福利",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"EditForm",attrs:{model:t.advert,rules:t.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"图片",prop:"pic"}},[i("ul",{staticClass:"app-image-list"},[t.advert.pic?i("li",{staticClass:"image-item",on:{click:function(e){t.showPhotoDialog=!0}}},[i("img",{attrs:{src:t.advert.pic,role:"presentation",alt:"",width:"50"}})]):i("li",{staticClass:"el-upload el-upload--advert-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"客户名称",prop:"linkman"}},[i("el-input",{model:{value:t.advert.linkman,callback:function(e){t.$set(t.advert,"linkman","string"==typeof e?e.trim():e)},expression:"advert.linkman"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系方式",prop:"linkTel"}},[i("el-input",{model:{value:t.advert.linkTel,callback:function(e){t.$set(t.advert,"linkTel","string"==typeof e?e.trim():e)},expression:"advert.linkTel"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"广告标题",prop:"title"}},[i("el-input",{model:{value:t.advert.title,callback:function(e){t.$set(t.advert,"title","string"==typeof e?e.trim():e)},expression:"advert.title"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("可以用于备注说明")])],1),t._v(" "),i("el-form-item",{attrs:{label:"小程序appid",prop:"appid"}},[i("el-input",{model:{value:t.advert.appid,callback:function(e){t.$set(t.advert,"appid","string"==typeof e?e.trim():e)},expression:"advert.appid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"小程序页面",prop:"appPage"}},[i("el-input",{model:{value:t.advert.appPage,callback:function(e){t.$set(t.advert,"appPage","string"==typeof e?e.trim():e)},expression:"advert.appPage"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"可领取的能量值",prop:"energy"}},[i("el-input",{attrs:{size:"small"},model:{value:t.advert.energy,callback:function(e){t.$set(t.advert,"energy",e)},expression:"advert.energy"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("同个广告，每个用户只能领取一次？")])],1),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[i("el-input",{attrs:{size:"small"},model:{value:t.advert.sort,callback:function(e){t.$set(t.advert,"sort",e)},expression:"advert.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态",prop:"frozen"}},[i("el-switch",{attrs:{"active-text":t.advert.frozen?"显示中":"已冻结"},model:{value:t.advert.frozen,callback:function(e){t.$set(t.advert,"frozen",e)},expression:"advert.frozen"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading,size:"mini"},on:{click:function(e){t.save()}}},[t._v("确 定")])],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPhotoDialog},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}})],1)},staticRenderFns:[]};var Qt=i("VU/8")(Jt,Gt,!1,function(t){i("A+kf")},null,null).exports,Zt=function(t){return t.type=1,u.a.post("/docs/list",t)},Xt=function(t){return t.type=2,u.a.post("/docs/list",t)},te=function(t){return t.type=1,u.a.post("/docs/save",t)},ee=function(t){return t.type=2,u.a.post("/docs/save",t)},ie=function(t){return u.a.post("/docs/delete",t)},se=function(t,e){return u.a.post("/docs/publish/"+e,t)},oe=function(t){return u.a.post("/files/upload",t)},ae={name:"docs-list",components:{CommonTemplate:S.default},data:function(){return{loading:!1,editVisible:!1,docs:{frozen:!0,sort:100},list:null,page:{pageNo:1,pageSize:20},choose_id_arr:[],rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],brief:[{required:!0,message:"请输入描述",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var t=this,e={p:this.page.pageNo,s:this.page.pageSize};Zt(e).then(function(e){t.list=e.list,t.list.forEach(function(t){t.frozen=Boolean(t.frozen)}),t.page=e.page},function(e){t.$message.error(e.msg)})},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.loading=!0,te(t.docs).then(function(e){t.loading=!1,0===e.code?(t.editVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.loading=!1,t.$message.error(e.msg)}))})},reload:function(){this.list=null,this.page.pageNo=1,this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getList()},handleAdd:function(){this.editVisible=!0,this.docs={frozen:!0,sort:100}},handleEdit:function(t){this.editVisible=!0,this.docs=this.list[t]},changeStatus:function(t,e){var i=this;se([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){ie(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})})}}},ne={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"member-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新增攻略")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"标题",align:"left",prop:"title"}}),t._v(" "),i("el-table-column",{attrs:{label:"说明",align:"left",prop:"brief"}}),t._v(" "),i("el-table-column",{attrs:{label:"排序",width:"50",align:"center",prop:"sort"}}),t._v(" "),i("el-table-column",{attrs:{width:"150",label:"显示状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"显示中":"已冻结"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"150",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.$index)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e()],1)]),t._v(" "),i("el-dialog",{attrs:{title:"能量攻略",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"EditForm",attrs:{model:t.docs,rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"标题"},model:{value:t.docs.title,callback:function(e){t.$set(t.docs,"title","string"==typeof e?e.trim():e)},expression:"docs.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"brief"}},[i("el-input",{attrs:{type:"textarea",rows:5,"auto-complete":"off",placeholder:"说明"},model:{value:t.docs.brief,callback:function(e){t.$set(t.docs,"brief","string"==typeof e?e.trim():e)},expression:"docs.brief"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[i("el-input",{attrs:{size:"small"},model:{value:t.docs.sort,callback:function(e){t.$set(t.docs,"sort",e)},expression:"docs.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态",prop:"frozen"}},[i("el-switch",{attrs:{"active-text":t.docs.frozen?"显示中":"已冻结"},model:{value:t.docs.frozen,callback:function(e){t.$set(t.docs,"frozen",e)},expression:"docs.frozen"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading,size:"mini"},on:{click:function(e){t.save()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var le=i("VU/8")(ae,ne,!1,function(t){i("z74+")},null,null).exports,re={name:"docs-list",components:{CommonTemplate:S.default,UploadPhoto:U},computed:ot()({},Object(at.b)(["isShowUpload"])),data:function(){return{editor_imgs:[],loading:!1,editVisible:!1,docs:{frozen:!0,sort:100},list:null,page:{pageNo:1,pageSize:20},choose_id_arr:[],rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入回答内容",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},created:function(){this.getList()},methods:ot()({getList:function(){var t=this,e={p:this.page.pageNo,s:this.page.pageSize};Xt(e).then(function(e){t.list=e.list,t.list.forEach(function(t){t.content||(t.content=t.brief),t.frozen=Boolean(t.frozen)}),t.page=e.page},function(e){t.$message.error(e.msg)})},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.loading=!0,ee(t.docs).then(function(e){t.loading=!1,0===e.code?(t.editVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.loading=!1,t.$message.error(e.msg)}))})},updateData:function(t){this.docs.content=t},reload:function(){this.list=null,this.page.pageNo=1,this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getList()},handleAdd:function(){this.editVisible=!0,this.docs={frozen:!0,sort:100}},handleEdit:function(t){this.editVisible=!0,this.docs=this.list[t]}},Object(at.c)(["showUpload"]),{confirmEditorImg:function(t){var e=this;this.showUpload(!1),console.log(t);var i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});oe(t).then(function(t){i.close(),t.picArr&&t.picArr.forEach(function(t){e.$refs.editor.execCommand("insertImage",t)})},function(t){i.close(),e.$message.error(t.msg)})},switchEditorShow:function(t){this.showUpload(t)},changeStatus:function(t,e){var i=this;se([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){ie(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})}).catch(function(){})}})},ce={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"member-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新增常见问题")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"问题",align:"left",prop:"title"}}),t._v(" "),i("el-table-column",{attrs:{label:"排序",width:"80",align:"center",prop:"sort"}}),t._v(" "),i("el-table-column",{attrs:{width:"150",label:"显示状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"显示中":"已冻结"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"200",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.$index)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e()],1)]),t._v(" "),i("el-dialog",{attrs:{title:"常见问题",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"EditForm",attrs:{model:t.docs,rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"问题",prop:"title"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"标题"},model:{value:t.docs.title,callback:function(e){t.$set(t.docs,"title","string"==typeof e?e.trim():e)},expression:"docs.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"回答",prop:"brief"}},[i("vue-html5-editor",{ref:"editor",attrs:{content:t.docs.content,"show-module-name":!1,height:300},on:{change:t.updateData}})],1),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[i("el-input",{attrs:{size:"small"},model:{value:t.docs.sort,callback:function(e){t.$set(t.docs,"sort",e)},expression:"docs.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态",prop:"frozen"}},[i("el-switch",{attrs:{"active-text":t.docs.frozen?"显示中":"已冻结"},model:{value:t.docs.frozen,callback:function(e){t.$set(t.docs,"frozen",e)},expression:"docs.frozen"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading,size:"mini"},on:{click:function(e){t.save()}}},[t._v("确 定")])],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:5,limit_max:!1,show:t.isShowUpload,current_len:t.editor_imgs.length},on:{confirm:t.confirmEditorImg,"update:show":t.switchEditorShow}})],1)},staticRenderFns:[]};var de=i("VU/8")(re,ce,!1,function(t){i("bXLH")},null,null).exports,ue=function(){return u.a.post("/site/info",{})},pe=function(t){return u.a.post("/site/save",t)},me=function(t){return u.a.post("/site/menu/list",{})},fe=function(t){return u.a.post("/site/menu/save",t)},he={name:"site-list",components:{UploadPhoto:U},data:function(){return{showPhotoDialog:!1,showPicDialog:!1,btn_loading:!1,btn_share_loading:!1,activeName:"first",formLabelWidth:"120px",site:{},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],logo:[{required:!0,message:"请上传logo",trigger:"blur"}]}}},created:function(){this.getSiteInfo()},methods:{getSiteInfo:function(){var t=this;ue().then(function(e){t.site=e.site},function(e){t.$message.error(e.msg)})},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.btn_loading=!0,pe(t.site).then(function(e){t.btn_loading=!1,0===e.code?(t.$message.success("保存成功！"),t.site.id=e.siteId,t.activeName="second",t.getSiteInfo()):t.$message.error(e.msg)},function(e){t.btn_loading=!1,t.$message.error(e.msg)}))})},saveShareInfo:function(){var t=this;this.btn_share_loading=!0,pe(this.site).then(function(e){t.btn_share_loading=!1,0===e.code?(t.$message.success("保存成功！"),t.activeName="first"):t.$message.error(e.msg)},function(e){t.btn_share_loading=!1,t.$message.error(e.msg)})},confirmPhoto:function(t){this.site.logo=t[0]},confirmPic:function(t){this.site.sharePic=t[0]}}},ge={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-add-content goods-add-content"},[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main",staticStyle:{"margin-top":"20px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{staticClass:"main-first",staticStyle:{"padding-bottom":"30px"},attrs:{label:"站点信息",name:"first"}},[i("div",{staticClass:"section"},[i("el-form",{ref:"EditForm",staticStyle:{width:"600px"},attrs:{rules:t.rules,model:t.site,"label-width":t.formLabelWidth}},[i("el-form-item",{attrs:{label:"LOGO"}},[i("ul",{staticClass:"app-image-list"},[t.site.logo?i("li",{staticClass:"image-item",on:{click:function(e){t.showPhotoDialog=!0}}},[i("img",{attrs:{src:t.site.logo,role:"presentation",alt:"",width:"80"}})]):i("li",{staticClass:"el-upload el-upload--picture-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{attrs:{size:"small"},model:{value:t.site.name,callback:function(e){t.$set(t.site,"name",e)},expression:"site.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"线上版本",prop:"version"}},[i("el-input",{attrs:{size:"small"},model:{value:t.site.version,callback:function(e){t.$set(t.site,"version",e)},expression:"site.version"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[i("el-input",{attrs:{size:"small"},model:{value:t.site.mobile,callback:function(e){t.$set(t.site,"mobile",e)},expression:"site.mobile"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系邮箱",prop:"email"}},[i("el-input",{attrs:{size:"small"},model:{value:t.site.email,callback:function(e){t.$set(t.site,"email",e)},expression:"site.email"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"工作时间",prop:"workTime"}},[i("el-input",{attrs:{size:"small"},model:{value:t.site.workTime,callback:function(e){t.$set(t.site,"workTime",e)},expression:"site.workTime"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"推荐语",prop:"intro"}},[i("el-input",{attrs:{type:"textarea",rows:2,size:"small"},model:{value:t.site.intro,callback:function(e){t.$set(t.site,"intro",e)},expression:"site.intro"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"简介",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:5,size:"small"},model:{value:t.site.remark,callback:function(e){t.$set(t.site,"remark",e)},expression:"site.remark"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"next-footer",staticStyle:{"margin-left":"120px"}},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.btn_loading},on:{click:t.save}},[t._v("保存并下一步")])],1)]),t._v(" "),i("el-tab-pane",{staticStyle:{"padding-bottom":"30px"},attrs:{label:"分享设置",name:"second"}},[i("el-form",{attrs:{model:t.site,"label-width":t.formLabelWidth}},[i("el-form-item",{attrs:{label:"分享描述",prop:"shareTitle"}},[i("el-input",{attrs:{type:"textarea",rows:2,size:"small"},model:{value:t.site.shareTitle,callback:function(e){t.$set(t.site,"shareTitle",e)},expression:"site.shareTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"分享路径",prop:"sharePath"}},[i("el-input",{attrs:{size:"small"},model:{value:t.site.sharePath,callback:function(e){t.$set(t.site,"sharePath",e)},expression:"site.sharePath"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"分享图片",prop:"sharePic"}},[i("ul",{staticClass:"app-image-list"},[t.site.sharePic?i("li",{staticClass:"image-item",on:{click:function(e){t.showPicDialog=!0}}},[i("img",{attrs:{src:t.site.sharePic,role:"presentation",alt:"",width:"100"}})]):i("li",{staticClass:"el-upload el-upload--picture-card",staticStyle:{width:"100px",height:"100px","line-height":"1"},on:{click:function(e){t.showPicDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"50px","margin-top":"25px"}})])])])],1),t._v(" "),i("div",{staticClass:"next-footer",staticStyle:{"margin-left":"120px","margin-top":"10px"}},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.btn_share_loading},on:{click:function(e){t.saveShareInfo()}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.activeName="first"}}},[t._v("上一步")])],1)],1)],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPhotoDialog},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}}),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPicDialog},on:{"update:show":function(e){t.showPicDialog=e},confirm:t.confirmPic}})],1)},staticRenderFns:[]};var _e=i("VU/8")(he,ge,!1,function(t){i("pA66")},null,null).exports,ve=i("mvHQ"),be=i.n(ve),ye={name:"menuLogos-list",components:{CommonTemplate:S.default,UploadPhoto:U},data:function(){return{showPhotoDialog:!1,loading:!1,editVisible:!1,list:null,req:{},menuLogo:{},choose_id_arr:[],rules:{}}},created:function(){this.getList()},methods:{getList:function(){var t=this;me(this.req).then(function(e){t.list=e.list?e.list:[]},function(e){t.$message.error(e.msg)})},reload:function(){this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},handleEdit:function(t){this.editVisible=!0,this.menuLogo=this.list[t]},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.loading=!0,t.list[t.menuLogo.id]=t.menuLogo,fe(be()(t.list)).then(function(e){t.loading=!1,0===e.code?(t.editVisible=!1,t.$message.success("保存成功！"),t.reload()):t.$message.error(e.msg)},function(e){t.loading=!1,t.$message.error(e.msg)}))})},confirmPhoto:function(t){this.menuLogo.pic=t[0]}}},we={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"菜单Logo",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[e.row.pic?i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.pic+")"}}):t._e()])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"菜单名称",align:"center",prop:"name"}}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.$index)}}},[t._v("编辑")])]}}])})],1)],1)]),t._v(" "),i("el-dialog",{attrs:{title:"菜单图标设置",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"EditForm",attrs:{model:t.menuLogo,rules:t.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[i("el-input",{model:{value:t.menuLogo.name,callback:function(e){t.$set(t.menuLogo,"name","string"==typeof e?e.trim():e)},expression:"menuLogo.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"图片",prop:"pic"}},[i("ul",{staticClass:"app-image-list"},[t.menuLogo.pic?i("li",{staticClass:"image-item",on:{click:function(e){t.showPhotoDialog=!0}}},[i("img",{attrs:{src:t.menuLogo.pic,role:"presentation",alt:"",width:"50"}})]):i("li",{staticClass:"el-upload el-upload--advert-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])])],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading,size:"mini"},on:{click:function(e){t.save()}}},[t._v("确 定")])],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPhotoDialog},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}})],1)},staticRenderFns:[]};var ke={path:"/setting",name:"系统设置",icon:"el-icon-setting",component:Wt,hidden_child:!1,children:[{name:"系统设置",path:"manager",component:Kt,children:[{path:"advert",component:Yt,name:"广告福利",meta:{title:"广告福利"}},{path:"menuAdvert",component:Qt,name:"菜单广告",meta:{title:"菜单广告"}},{path:"strategy",component:le,name:"能量攻略",meta:{title:"能量攻略"}},{path:"question",component:de,name:"常见问题",meta:{title:"常见问题"}},{path:"site",component:_e,name:"站点设置",meta:{title:"站点设置"}},{path:"menuLogos",component:i("VU/8")(ye,we,!1,function(t){i("aCkm")},null,null).exports,name:"图标设置",meta:{title:"图标设置"}}],redirect:"/setting/manager/advert"}],redirect:"/setting/manager"},xe={name:"router",data:function(){return{route:ui}},components:{SecondRouter:w}},Ce={render:function(){var t=this.$createElement;return(this._self._c||t)("SecondRouter",{attrs:{"route-info":this.route}})},staticRenderFns:[]},ze=i("VU/8")(xe,Ce,!1,null,null,null).exports,$e={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"store"}},[e("router-view")],1)},staticRenderFns:[]};var Se=i("VU/8")({},$e,!1,function(t){i("zZ0s")},null,null).exports,Pe=function(t){return u.a.post("/goods/list",t)},qe=function(t){return u.a.post("/goods/info/"+t,{})},Te=function(t){return u.a.post("/goods/save",t)},Ne=function(t){return u.a.post("/goods/delete",t)},Le=function(t,e){return 1===e?u.a.post("/goods/batchPublish",t):0===e?u.a.post("/goods/batchFrozen",t):void 0},Ee=function(t){return u.a.post("/files/upload",t)},Re={name:"goods-list",components:{CommonTemplate:S.default},data:function(){return{list:null,req:{type:1},page:{pageNo:1,pageSize:20},choose_id_arr:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.req.p=this.page.pageNo,this.req.s=this.page.pageSize,Pe(this.req).then(function(e){t.list=e.list,t.list.forEach(function(t){t.frozen=Boolean(t.frozen)}),t.page=e.page},function(e){t.$message.error(e.msg)})},reload:function(){this.page.pageNo=1,this.getList()},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},handleEdit:function(t){this.$router.push({path:"/store/manager/goods/edit/"+t})},changeStatus:function(t,e){var i=this;Le([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},batchPublish:function(t){var e=this;if(0!==this.choose_id_arr.length){var i=this.choose_id_arr.map(function(t){return t.id});this.$confirm("确认"+(t?"上架":"下架")+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Le(i,t?1:0).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})}).catch(function(){})}else this.$message.error("请至少选择一个商品！")},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Ne(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})})}}},De={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.$router.push("/store/manager/goods/add")}}},[t._v("新增商品")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.batchPublish(1)}}},[t._v("批量上架")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.batchPublish(0)}}},[t._v("批量下架")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1),t._v(" "),i("div",{staticClass:"operation-right"},[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.reload(e):null}},model:{value:t.req.keywords,callback:function(e){t.$set(t.req,"keywords",e)},expression:"req.keywords"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.reload()}},slot:"append"})],1)],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{"min-width":"250",label:"商品信息",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.thumb+")"}}),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.name))]),t._v(" "),i("p",{staticClass:"item__info-sub",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.keywords))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"能量",align:"center",prop:"energy"}}),t._v(" "),i("el-table-column",{attrs:{label:"库存",align:"center",prop:"stock"}}),t._v(" "),i("el-table-column",{attrs:{label:"排序",align:"center",prop:"sort"}}),t._v(" "),i("el-table-column",{attrs:{width:"150",label:"上架状态",align:"center",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"已上架":"已下架"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e()],1)])],1)},staticRenderFns:[]};var Ae=i("VU/8")(Re,De,!1,function(t){i("CsbD")},null,null).exports,Ve=i("BO1k"),Fe=i.n(Ve),Ue={name:"xs-sku-table",props:{update:{type:Boolean,default:!1}},methods:{onUpdate:function(t){this.$emit("update",t)}}},Ie={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{staticClass:"xs-sku-table"},[i("thead",[t._t("head")],2),t._v(" "),t.update?[i("tbody",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:t.onUpdate},expression:"{onUpdate: onUpdate}"}]},[t._t("body")],2)]:[i("tbody",[t._t("body")],2)],t._v(" "),i("tfoot",[t._t("foot")],2)],2)},staticRenderFns:[]};var Be=i("VU/8")(Ue,Ie,!1,function(t){i("V8gb")},"data-v-77df6fe8",null).exports,Oe=i("woOf"),Ke=i.n(Oe),je=i("lHA8"),We=i.n(je),He=i("c/Tr"),Me=i.n(He),Ye={name:"xs-sku",components:{UploadPhoto:U},props:{showAttrBtn:{type:Boolean,default:!0},sku_group_list_prop:{type:Array,default:[]}},data:function(){return{showPhotoDialog:!1,sku_titles:["颜色","尺寸","尺码","规格","款式","净含量","种类"],sku_title:"",sku_group_list:[],group_primary_key:0,drop_down_left:0,drop_down_top:0,sel_sku_group_index:0,focusSearch:0,sku_pic_maps:{},current_upload_sub_item_index:null,current_upload_sub_item_id:-1,photo_action:"add",need_reset:!1,temp_sku_input_name:null,is_show_ui_popover:!1,ui_popover_left:0,ui_popover_top:0,ui_popover_width:200,adding_of_sub_name:"",temp_of_sub_sku_items:[],add_sub_of_sku_group:null,focusPopover:!1,is_show_ui_edit_popover:!1,ui_popover_edit_left:0,ui_popover_edit_top:0,ui_popover_edit_width:200,temp_edit_name:null,temp_edit_index_path:null}},methods:{addGroupList:function(){var t=this,e={name:null,add_img:!1,show_drop_down:!1,show_ui_popover:!1,id:this.group_primary_key,attr_temps:[],attrs:[]};this.sku_group_list.push(e),this.group_primary_key++,setTimeout(function(){t.showSkuTitleDrop({currentTarget:document.getElementById("auto_id"+e.id)})},1)},showSkuTitleDrop:function(t){if(this.showAttrBtn){var e=t.currentTarget,i=e.parentNode,s=e.getBoundingClientRect();this.drop_down_left=e.offsetLeft+i.offsetLeft,this.drop_down_top=s.height+e.offsetTop+i.offsetTop;var o=parseInt(e.getAttribute("data-index"));this.sel_sku_group_index=o,this.sku_group_list[o].show_drop_down=!0,this.focusSearch=!0}},closeSkuTitleDrop:function(){this.focusSearch=!1,this.sku_group_list[this.sel_sku_group_index].show_drop_down=!1},skuTitleDidClick:function(t){this.temp_sku_input_name=null;var e=this.sku_group_list[this.sel_sku_group_index];this.sku_group_list.find(function(e){return e.name===t})?this.$message.error("已经添加了相同的规格名"):(e.name=t,e.show_drop_down=!1,this.focusSearch=!1)},showUIPopover:function(t){this.closeAllPopover();var e=.5*(this.ui_popover_width+40);this.is_show_ui_popover=!0;var i=t.currentTarget,s=i.parentNode,o=i.getBoundingClientRect();this.ui_popover_left=i.offsetLeft+.5*o.width-e,this.ui_popover_top=o.height+s.offsetTop+10;var a=i.getAttribute("data-index");this.add_sub_of_sku_group=this.sku_group_list[a],this.focusPopover=!0},addSubSkuOf:function(){null!==this.adding_of_sub_name&&0!==this.adding_of_sub_name.length&&(-1===this.temp_of_sub_sku_items.indexOf(this.adding_of_sub_name)?this.temp_of_sub_sku_items.push(this.adding_of_sub_name):this.$message.error("已经添加了相同的规格名"),this.adding_of_sub_name=null,this.focusPopover=!0)},deleteSku:function(t){this.sku_group_list.splice(t,1),this.$emit("update",{need_clear:!0,sku_group_list:this.sku_group_list})},deleteSubSkuOf:function(t){this.temp_of_sub_sku_items.splice(t,1)},confirmSubSku:function(){var t=this;this.add_sub_of_sku_group.attr_temps=Me()(new We.a(this.add_sub_of_sku_group.attr_temps.concat(this.temp_of_sub_sku_items)));var e=this.add_sub_of_sku_group.attr_temps.map(function(e){return{name:e,pic:t.sku_pic_maps[e]?t.sku_pic_maps[e]:""}});this.add_sub_of_sku_group.attrs=e,this.is_show_ui_popover=!1,this.temp_of_sub_sku_items=[],this.$emit("update",{sku_group_list:this.sku_group_list})},skuNameDidEdit:function(t,e){if(this.showAttrBtn){this.closeAllPopover();var i=.5*(this.ui_popover_edit_width+40),s=event.currentTarget,o=s.parentNode,a=s.getBoundingClientRect();this.ui_popover_edit_left=s.offsetLeft+.5*a.width-i,this.ui_popover_edit_top=a.height+o.offsetTop+20,this.is_show_ui_edit_popover=!0,this.temp_edit_name=this.sku_group_list[t].attr_temps[e],this.temp_edit_index_path={i:t,j:e}}},skuNameDidDelete:function(t,e){delete this.sku_pic_maps[this.sku_group_list[t].attr_temps[e]],this.sku_group_list[t].attr_temps.splice(e,1),this.sku_group_list[t].attrs.splice(e,1),this.closeAllPopover(),this.$emit("update",{sku_group_list:this.sku_group_list})},confirmSubSkuDidEdit:function(){var t=this.temp_edit_index_path.i,e=this.temp_edit_index_path.j;this.sku_group_list[t].attr_temps[e]=this.temp_edit_name,this.sku_group_list[t].attrs[e].name=this.temp_edit_name,this.$emit("update",{sku_group_list:this.sku_group_list}),this.closeAllPopover()},uploadDidClick:function(t){this.photo_action="add",this.showPhotoDialog=!0,this.current_upload_sub_item_index=t},replacePhoto:function(t){this.photo_action="change",this.showPhotoDialog=!0,this.current_upload_sub_item_index=t},deletePhoto:function(t){this.sku_group_list[0].attrs[t].pic=null,this.need_reset=!0},closeAllPopover:function(){this.is_show_ui_edit_popover=!1,this.is_show_ui_popover=!1},confirmPhoto:function(t){null!==this.current_upload_sub_item_index?(this.sku_group_list[0].attrs[this.current_upload_sub_item_index].pic=t[0],this.sku_pic_maps[this.sku_group_list[0].attr_temps[this.current_upload_sub_item_index]]=t[0],this.current_upload_sub_item_index=null):this.$message.error("请选择要上传图片的规格")},getScrollTop:function(){var t=0;return document.documentElement&&document.documentElement.scrollTop?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t},getScrollLeft:function(){var t=0;return document.documentElement&&document.documentElement.scrollLeft?t=document.documentElement.scrollLeft:document.body&&(t=document.body.scrollLeft),t}},computed:{is_show_drop_down:function(){return-1!==this.sel_sku_group_index&&(!!this.sku_group_list[this.sel_sku_group_index]&&this.sku_group_list[this.sel_sku_group_index].show_drop_down)}},watch:{sku_group_list_prop:function(t){var e=t.map(function(t){return Ke()({},t)});console.log(e),this.sku_group_list=e,this.group_primary_key=t.length,this.$emit("update",{sku_group_list:this.sku_group_list})}}},Je={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"xs-sku"},[i("div",[t._l(t.sku_group_list,function(e,s){return i("div",{staticClass:"xs-sku-group"},[i("h3",{staticClass:"group-title"},[i("span",{staticClass:"group-title__label"},[t._v("规格名:")]),t._v(" "),i("div",{staticClass:"xs-popover-wrapper xs-select",attrs:{id:"auto_id"+e.id,"data-index":s},on:{click:function(e){return e.stopPropagation(),t.showSkuTitleDrop(e)}}},[i("div",{staticClass:"xs-select-text"},[t._v("\n              "+t._s(e.name?e.name:"请选择：按回车自定义")+"\n            ")])]),t._v(" "),0===s&&t.showAttrBtn?i("el-checkbox",{staticClass:"xs-checkbox",staticStyle:{"margin-left":"10px"},model:{value:e.add_img,callback:function(i){t.$set(e,"add_img",i)},expression:"item.add_img"}},[i("span",{staticClass:"xs-checkbox__label"},[t._v("添加规格图片")])]):t._e(),t._v(" "),t.showAttrBtn?i("a",{staticClass:"remove-sku-group",on:{click:function(e){t.deleteSku(s)}}},[t._v("×")]):t._e()],1),t._v(" "),i("div",{staticClass:"group-container"},[i("span",{staticClass:"sku-list__label"},[t._v("规格值：")]),t._v(" "),i("div",[i("div",{staticClass:"xs-sku__list"},[t._l(e.attrs,function(o,a){return i("div",{staticClass:"xs-sku-item",style:{"margin-bottom":e.add_img?"100px":"0"},on:{click:function(e){t.skuNameDidEdit(s,a)}}},[i("span",[t._v(t._s(o.name))]),t._v(" "),t.showAttrBtn?i("div",{staticClass:"item-remove",on:{click:function(e){e.stopPropagation(),t.skuNameDidDelete(s,a)}}},[t._v("×")]):t._e(),t._v(" "),e.add_img?i("div",{staticClass:"upload-img-wrap"},[i("div",{staticClass:"arrow"}),t._v(" "),i("div",{staticClass:"upload-img"},[i("span",{directives:[{name:"show",rawName:"v-show",value:o.pic,expression:"subItem.pic"}],staticClass:"item-remove small",attrs:{title:"删除"},on:{click:function(e){e.stopPropagation(),t.deletePhoto(a)}}},[t._v("×")]),t._v(" "),o.pic?i("img",{attrs:{src:o.pic},on:{click:function(t){t.stopPropagation()}}}):i("div",{staticClass:"item-upload-container",staticStyle:{position:"relative"},on:{click:function(e){e.stopPropagation(),t.uploadDidClick(a)}}},[i("div",{staticClass:"add-image js-btn-add"},[t._v("+")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:o.pic,expression:"subItem.pic"}],staticClass:"rc-upload"},[i("div",{staticClass:"img-edit"},[i("span",{staticStyle:{margin:"0 auto"},on:{click:function(e){e.stopPropagation(),t.replacePhoto(a)}}},[t._v("替换")])])])])]):t._e()])}),t._v(" "),t.showAttrBtn?i("span",{staticClass:"xs-sku-add",attrs:{"data-index":s},on:{click:t.showUIPopover}},[t._v("+ 添加")]):t._e()],2),t._v(" "),e.add_standard_img?i("p",{staticClass:"xs-assist-label",staticStyle:{"line-height":"1.5","margin-top":"20px"}},[t._v("\n              目前只支持为第一个规格设置不同的规格图片设置后,"),i("br"),t._v(" 用户选择不同规格会显示不同图片。建议尺寸：750X750（像素）\n            ")]):t._e()])]),t._v(" "),i("div",{staticClass:"sku-group-cont"})])}),t._v(" "),t.showAttrBtn?i("div",{staticClass:"xs-sku-group"},[i("h3",{staticClass:"group-title"},[i("el-button",{attrs:{size:"mini"},on:{click:t.addGroupList}},[t._v("添加规格项目")])],1)]):t._e(),t._v(" "),t.showAttrBtn?t._e():i("p",{staticClass:"xs-assist-label",staticStyle:{"line-height":"1.5","margin-top":"20px",color:"red"}},[t._v("\n        温馨提示：正在进行中的拼团或砍价商品，不能修改规格！！！\n      ")])],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.is_show_drop_down,expression:"is_show_drop_down"}],staticClass:"xs-popover-mask",on:{click:t.closeSkuTitleDrop}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.is_show_drop_down,expression:"is_show_drop_down"}],staticClass:"xs-popover xs-select",style:{position:"absolute",left:t.drop_down_left+"px",top:t.drop_down_top+"px"}},[i("div",{staticClass:"xs-popover-content"},[i("div",{staticClass:"xs-select-popup"},[i("div",{staticClass:"xs-select-search"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.temp_sku_input_name,expression:"temp_sku_input_name"},{name:"focus",rawName:"v-focus",value:t.focusSearch,expression:"focusSearch"}],staticClass:"xs-select-filter",attrs:{type:"text"},domProps:{value:t.temp_sku_input_name},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.skuTitleDidClick(t.temp_sku_input_name)},input:function(e){e.target.composing||(t.temp_sku_input_name=e.target.value)}}})]),t._v(" "),t._l(t.sku_titles,function(e){return i("span",{staticClass:"xs-select-option",on:{click:function(i){t.skuTitleDidClick(e)}}},[t._v(t._s(e))])})],2)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.is_show_ui_popover,expression:"is_show_ui_popover"}],staticClass:"ui-popover",style:{left:t.ui_popover_left+"px",top:t.ui_popover_top+"px"}},[i("div",{staticClass:"ui-popover-inner",style:{width:t.ui_popover_width+"px"}},[i("div",{staticClass:"select-container "},[i("ul",{staticClass:"select-choices"},[t._l(t.temp_of_sub_sku_items,function(e,s){return i("li",{staticClass:"select-search-choice",on:{click:function(e){t.deleteSubSkuOf(s)}}},[t._v("\n            "+t._s(e)+"\n            "),i("a",{staticClass:"select-search-choice-close",attrs:{href:"#",onclick:"return false;",tabindex:"-1"}})])}),t._v(" "),i("li",{staticClass:"select-search-field"},[i("input",{directives:[{name:"focus",rawName:"v-focus",value:t.focusPopover,expression:"focusPopover"},{name:"model",rawName:"v-model",value:t.adding_of_sub_name,expression:"adding_of_sub_name"}],attrs:{type:"text",placeholder:"添加规格值",maxlength:"20"},domProps:{value:t.adding_of_sub_name},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addSubSkuOf(e):null},input:function(e){e.target.composing||(t.adding_of_sub_name=e.target.value)}}})])],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.adding_of_sub_name&&t.adding_of_sub_name.length>0,expression:"adding_of_sub_name && adding_of_sub_name.length > 0"}],staticClass:"select-drop"},[i("ul",{staticClass:"select-results"},[i("li",{staticClass:"select-highlighted",on:{click:t.addSubSkuOf}},[i("div",{staticClass:"select-result-label"},[t._v("回车或点击来添加规格值: "),i("i",[t._v(t._s(t.adding_of_sub_name))])])])])])]),t._v(" "),i("div",{staticClass:"ui-btn ui-btn-primary",staticStyle:{"vertical-align":"top"},on:{click:function(e){return e.stopPropagation(),t.confirmSubSku(e)}}},[t._v("确定")]),t._v(" "),i("div",{staticClass:"ui-btn",staticStyle:{"vertical-align":"top"},on:{click:function(e){t.is_show_ui_popover=!1}}},[t._v("取消")])]),t._v(" "),i("div",{staticClass:"arrow"})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.is_show_ui_edit_popover,expression:"is_show_ui_edit_popover"}],staticClass:"ui-popover",style:{left:t.ui_popover_edit_left+"px",top:t.ui_popover_edit_top+"px"}},[i("div",{staticClass:"ui-popover-inner",style:{width:t.ui_popover_edit_width+"px"}},[i("div",{staticClass:"select-container ",staticStyle:{width:"192px"}},[i("ul",{staticClass:"select-choices"},[i("li",{staticClass:"select-search-field"},[i("input",{directives:[{name:"focus",rawName:"v-focus",value:t.focusPopover,expression:"focusPopover"},{name:"model",rawName:"v-model",value:t.temp_edit_name,expression:"temp_edit_name"}],attrs:{type:"text",placeholder:"修改规格值",maxlength:"20"},domProps:{value:t.temp_edit_name},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.confirmSubSkuDidEdit(e):null},input:function(e){e.target.composing||(t.temp_edit_name=e.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"ui-btn ui-btn-primary",staticStyle:{"vertical-align":"top"},on:{click:t.confirmSubSkuDidEdit}},[t._v("确定")]),t._v(" "),i("div",{staticClass:"ui-btn",staticStyle:{"vertical-align":"top"},on:{click:function(e){e.stopPropagation(),t.is_show_ui_edit_popover=!1}}},[t._v("取消")])]),t._v(" "),i("div",{staticClass:"arrow"})]),t._v(" "),i("upload-photo",{attrs:{limit:1,multity:"index"+(t.current_upload_sub_item_index+1),show:t.showPhotoDialog,action:t.photo_action,reset:t.need_reset},on:{"update:show":function(e){t.showPhotoDialog=e},"update:reset":function(e){t.need_reset=e},confirm:t.confirmPhoto}})],1)},staticRenderFns:[]};var Ge={name:"goods-list",components:{UploadPhoto:U,Sku:i("VU/8")(Ye,Je,!1,function(t){i("mbKe")},null,null).exports,SkuTable:Be},computed:ot()({},Object(at.b)(["isShowUpload"])),data:function(){return{showAttrBtn:!0,initSkuList:[],skuListPool:[],computed_sku_group_list:[],skuList:[],batchInfo:{type:1,number:0},shop_imgs:[],shop_img_key:1,limit_count:5,editor_imgs:[],showPhotoDialog:!1,btn_loading:!1,btn_desc_loading:!1,activeName:"first",formLabelWidth:"120px",goods:{frozen:!0,sort:100,content:"",price:0,type:1},next_disbaled:!0,rules:{pics:[{required:!0,message:"请选择图片",trigger:"blur"}],name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],limitNum:[{required:!0,message:"请输入限购数量",trigger:"blur"}],marketPrice:[{required:!0,message:"请输入市场价",trigger:"blur"}],energy:[{required:!0,message:"请输入能量",trigger:"blur"}],stock:[{required:!0,message:"请输入商品库存",trigger:"blur"}]}}},created:function(){this.goods.type=1,this.$route.params.id&&(this.goods.id=this.$route.params.id,this.getGoodsInfo())},methods:ot()({getGoodsInfo:function(){var t=this;qe(this.goods.id).then(function(e){if(t.next_disbaled=!1,t.goods=e.goods,t.goods.content=t.goods.content?t.goods.content:"",t.goods.frozen=Boolean(t.goods.frozen),t.goods.pics){var i=JSON.parse(t.goods.pics);t.shop_imgs=i.map(function(e){return{id:t.shop_img_key++,pic:e}})}else t.goods.thumb?t.shop_imgs=[{id:t.shop_img_key++,pic:t.goods.thumb}]:t.shop_imgs=[];if(t.goods.attrs){t.goods.attrs=JSON.parse(t.goods.attrs);var s=0;if(t.goods.attrs.forEach(function(t){var e=[];t.attrs.forEach(function(t){e.push(t.name)}),t.attr_temps=e,t.show_drop_down=!1,t.show_ui_popover=!1,t.id=s++}),t.goods.skuList){t.goods.skuList.forEach(function(t){t.attrs=JSON.parse(t.attrs)}),t.skuListPool=t.skuListPool.concat(t.goods.skuList);var o=t.goods.attrs.slice(0);t.initSkuList=o}}},function(e){t.$message.error(e.msg)})},updateSkuTable:function(t){var e=this,i=t.need_clear,s=t.sku_group_list,o=[];this.skuList=[],this.computed_sku_group_list=[],i&&(this.skuListPool=[]);var a=!0,n=!1,l=void 0;try{for(var r,c=Fe()(s);!(a=(r=c.next()).done);a=!0){var d=r.value;d.attr_temps&&d.attr_temps.length>0&&(o.push(d.attr_temps),this.computed_sku_group_list.push(d))}}catch(t){n=!0,l=t}finally{try{!a&&c.return&&c.return()}finally{if(n)throw l}}var u=function t(e){var i=e.length;if(i>=2){for(var s=e[0],o=e[1],a=e[0].length,n=e[1].length,l=new Array(a*n),r=0,c=0;c<a;c++)for(var d=0;d<n;d++)l[r]=(s[c],s[c]+","+o[d]),r++;var u=new Array(i-1);if(u[0]=l,i>2){var p=1;for(c=2;c<i;c++)u[p]=e[c],p++}return t(u)}return e[0]}(o);if(u){var p=function(t){var i=t.split(",");(v=e.skuListPool.find(function(e){return e.attrs.join(",")===t}))||(v={attrs:i,stock:0,energy:0,price:0,frozen:1}),e.skuListPool.push(v),e.skuList.push(v)},m=!0,f=!1,h=void 0;try{for(var g,_=Fe()(u);!(m=(g=_.next()).done);m=!0){var v;p(g.value)}}catch(t){f=!0,h=t}finally{try{!m&&_.return&&_.return()}finally{if(f)throw h}}}},getRow:function(t,e){if(0===this.computed_sku_group_list.length)return 1;for(var i=1,s=e+1;s<this.computed_sku_group_list.length;s++)i*=0===this.computed_sku_group_list[s].attrs.length?1:this.computed_sku_group_list[s].attrs.length;return i},needShow:function(t,e){return t%this.getRow(t,e)==0},stockKeyup:function(t){var e=0;this.skuList.forEach(function(t){void 0!==t.stock&&null!==t.stock&&""!==t.stock||(t.stock=0),e+=parseInt(t.stock)}),this.goods.stock=e},batchSetNumber:function(){var t=this;if(1==this.batchInfo.type)this.skuList.forEach(function(e){e.energy=parseFloat(t.batchInfo.number)});else if(2==this.batchInfo.type)this.skuList.forEach(function(e){e.price=parseFloat(t.batchInfo.number)});else if(3==this.batchInfo.type){var e=0;this.skuList.forEach(function(i){i.stock=parseInt(t.batchInfo.number),e+=i.stock}),this.goods.stock=e}},save:function(){var t=this;if(this.skuList&&this.skuList.length>0){var e=this.skuList.map(function(t){return t.energy});this.goods.energy=Math.min.apply(null,e)}this.$refs.EditForm.validate(function(e){if(e){if(!t.goods.energy)return void t.$message.error("请输入商品换购所需能量");if(0===t.shop_imgs.length)return void t.$message.error("请至少上传一张缩略图");t.btn_loading=!0,t.goods.pics=t.shop_imgs.map(function(t){return t.pic}),t.goods.attrs=t.computed_sku_group_list,t.goods.skuList=t.skuList,Te(t.goods).then(function(e){t.btn_loading=!1,0===e.code?(t.$message.success("保存成功！"),t.goods.id=e.goodsId,t.activeName="second",t.next_disbaled=!1):t.$message.error(e.msg)},function(e){t.btn_loading=!1,t.$message.error(e.msg)})}})},saveDesc:function(){var t=this;this.btn_desc_loading=!0,Te({id:this.goods.id,content:this.goods.content}).then(function(e){t.btn_desc_loading=!1,0===e.code?(t.$message.success("保存成功！"),t.activeName="first",t.back()):t.$message.error(e.msg)},function(e){t.btn_desc_loading=!1,t.$message.error(e.msg)})},onUpdate:function(t){this.shop_imgs.splice(t.newIndex,0,this.shop_imgs.splice(t.oldIndex,1)[0])},confirmPhoto:function(t){var e=this;t=t.map(function(t){return{id:e.shop_img_key++,pic:t}}),this.shop_imgs=this.shop_imgs.concat(t)},removePhoto:function(t){this.shop_imgs.splice(t,1)},updateData:function(t){this.goods.content=t},back:function(){this.$router.push({path:"/store/manager/goods"})}},Object(at.c)(["showUpload"]),{confirmEditorImg:function(t){var e=this;this.showUpload(!1),console.log(t);var i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Ee(t).then(function(t){i.close(),t.picArr&&t.picArr.forEach(function(t){e.$refs.editor.execCommand("insertImage",t)})},function(t){i.close(),e.$message.error(t.msg)})},switchEditorShow:function(t){this.showUpload(t)}})},Qe={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-add-content goods-add-content"},[i("h1",{staticClass:"content__title"},[i("router-link",{attrs:{to:"/store/manager/goods"}},[t._v("商品列表 ")]),t._v(" / "+t._s(t.$route.meta.title)+"\n  ")],1),t._v(" "),i("div",{staticClass:"content__main",staticStyle:{"margin-top":"20px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{staticClass:"main-first",staticStyle:{"padding-bottom":"30px"},attrs:{label:"① 填写基本信息",name:"first"}},[i("div",{staticClass:"section"},[i("h3",{staticClass:"section-title"},[t._v("基本信息")]),t._v(" "),i("div",{staticClass:"section-content"},[i("el-form",{ref:"EditForm",staticStyle:{width:"600px"},attrs:{rules:t.rules,model:t.goods,"label-width":t.formLabelWidth}},[i("el-form-item",{attrs:{label:"商品图片",prop:"pics"}},[i("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:t.onUpdate},expression:"{ onUpdate: onUpdate }"}],staticClass:"app-image-list"},[t._l(t.shop_imgs,function(e,s){return i("li",{key:e.id,staticClass:"image-item",attrs:{draggable:"true"}},[i("img",{attrs:{src:e.pic,role:"presentation",alt:""}}),t._v(" "),i("a",{staticClass:"close-modal small",on:{click:function(e){t.removePhoto(s)}}},[t._v("×")])])}),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:t.limit_count>t.shop_imgs.length,expression:"limit_count > shop_imgs.length"}],staticClass:"el-upload el-upload--picture-card",on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus"})])],2),t._v(" "),i("p",{staticClass:"xs-assist-label clearfix"},[t._v("推荐尺寸：750px x 750px")])]),t._v(" "),i("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[i("el-input",{attrs:{size:"small"},model:{value:t.goods.name,callback:function(e){t.$set(t.goods,"name",e)},expression:"goods.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"关键字",prop:"keywords"}},[i("el-input",{attrs:{size:"small"},model:{value:t.goods.keywords,callback:function(e){t.$set(t.goods,"keywords",e)},expression:"goods.keywords"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("增加产品被搜索到的可能性")])],1),t._v(" "),i("el-form-item",{attrs:{label:"市场价",prop:"marketPrice"}},[i("el-input",{attrs:{size:"small"},model:{value:t.goods.marketPrice,callback:function(e){t.$set(t.goods,"marketPrice",e)},expression:"goods.marketPrice"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"限购数量",prop:"limitNum"}},[i("el-input",{staticClass:"xs-input",attrs:{size:"mini"},model:{value:t.goods.limitNum,callback:function(e){t.$set(t.goods,"limitNum",e)},expression:"goods.limitNum"}},[i("template",{slot:"append"},[t._v(" / 每人")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[i("el-input",{attrs:{size:"small"},model:{value:t.goods.sort,callback:function(e){t.$set(t.goods,"sort",e)},expression:"goods.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态",prop:"frozen"}},[i("el-switch",{attrs:{"active-text":t.goods.frozen?"上架中":"已下架"},model:{value:t.goods.frozen,callback:function(e){t.$set(t.goods,"frozen",e)},expression:"goods.frozen"}})],1)],1)],1)]),t._v(" "),i("div",{staticClass:"section"},[i("h3",{staticClass:"section-title"},[t._v("规格/价格/库存")]),t._v(" "),i("div",{staticClass:"section-content"},[i("el-form",{ref:"EditForm",attrs:{rules:t.rules,model:t.goods,"label-width":t.formLabelWidth}},[t.showAttrBtn||t.goods.attrs?i("el-form-item",{attrs:{label:"商品规格"}},[i("sku",{attrs:{showAttrBtn:t.showAttrBtn,sku_group_list_prop:t.initSkuList},on:{update:t.updateSkuTable}})],1):t._e(),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.computed_sku_group_list&&t.computed_sku_group_list.length>0,expression:"computed_sku_group_list && computed_sku_group_list.length > 0"}],attrs:{label:"规格明细"}},[i("sku-table",[i("tr",{attrs:{slot:"head"},slot:"head"},[t._l(t.computed_sku_group_list,function(e){return e.attrs.length>0?i("th",[t._v("\n                      "+t._s(e.name)+"\n                    ")]):t._e()}),t._v(" "),i("th",{staticClass:"th-saleprice"},[t._v("消费能量")]),t._v(" "),i("th",{staticClass:"th-stock"},[t._v("库存")]),t._v(" "),i("th",{staticClass:"th-operation"},[t._v("操作")])],2),t._v(" "),t._l(t.skuList,function(e,s){return i("tr",{attrs:{slot:"foot"},slot:"foot"},[t._l(e.attrs,function(e,o){return[t.needShow(s,o)?i("td",{staticClass:"middle-td",attrs:{rowspan:t.getRow(s,o)}},[t._v(t._s(e))]):t._e()]}),t._v(" "),i("td",[i("el-input",{attrs:{size:"small",disabled:!t.showAttrBtn},model:{value:e.energy,callback:function(i){t.$set(e,"energy",i)},expression:"row_item.energy"}})],1),t._v(" "),i("td",[i("el-input",{attrs:{size:"small"},on:{change:function(e){t.stockKeyup(s)}},model:{value:e.stock,callback:function(i){t.$set(e,"stock",i)},expression:"row_item.stock"}})],1),t._v(" "),i("td",[0===e.frozen?i("span",{staticStyle:{color:"red"}},[t._v("禁用中")]):t._e(),t._v(" "),1===e.frozen?i("span",{staticStyle:{color:"green"}},[t._v("已启用")]):t._e(),t._v(" "),i("el-button",{staticClass:"form__button",attrs:{type:"text"},on:{click:function(t){e.frozen=!e.frozen}}},[t._v(t._s(1==e.frozen?"禁用":"启用"))])],1)],2)}),t._v(" "),i("tr",{attrs:{slot:"foot"},slot:"foot"},[i("td",{attrs:{colspan:"8"}},[i("div",{staticClass:"setting-wrap"},[i("span",[t._v("批量设置:")]),t._v(" "),i("el-radio-group",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini"},model:{value:t.batchInfo.type,callback:function(e){t.$set(t.batchInfo,"type",e)},expression:"batchInfo.type"}},[i("el-radio-button",{attrs:{label:"1"}},[t._v("能量")]),t._v(" "),i("el-radio-button",{attrs:{label:"3"}},[t._v("库存")])],1),t._v(" "),i("el-input",{staticClass:"xs-input",attrs:{size:"mini"},model:{value:t.batchInfo.number,callback:function(e){t.$set(t.batchInfo,"number",e)},expression:"batchInfo.number"}}),t._v(" "),i("el-button",{staticClass:"xs-button",attrs:{size:"mini",type:"primary"},on:{click:function(e){return e.stopPropagation(),t.batchSetNumber(e)}}},[t._v("确认")]),t._v(" "),i("div",{staticClass:"setting__total-wrap"},[i("span",[t._v("总库存")]),t._v(" "),i("el-input",{staticClass:"xs-input",attrs:{size:"mini",disabled:!0,value:t.goods.stock}})],1)],1)])])],2)],1),t._v(" "),i("div",[i("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"能量",prop:"energy"}},[i("el-input",{staticClass:"xs-input",attrs:{size:"mini",disabled:!t.showAttrBtn||t.computed_sku_group_list.length>0},model:{value:t.goods.energy,callback:function(e){t.$set(t.goods,"energy",e)},expression:"goods.energy"}})],1),t._v(" "),i("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"库存",prop:"stock"}},[i("el-input",{staticClass:"xs-input",attrs:{size:"mini",disabled:!t.showAttrBtn||t.computed_sku_group_list.length>0},model:{value:t.goods.stock,callback:function(e){t.$set(t.goods,"stock",e)},expression:"goods.stock"}})],1)],1)],1)],1)]),t._v(" "),i("div",{staticClass:"next-footer",staticStyle:{"margin-left":"120px"}},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.btn_loading},on:{click:t.save}},[t._v(t._s(1==t.goods.type?"保存并下一步":"保存"))]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:t.back}},[t._v("返回")])],1)]),t._v(" "),1==t.goods.type?i("el-tab-pane",{staticStyle:{"padding-bottom":"30px"},attrs:{label:"② 编辑详情",name:"second",disabled:t.next_disbaled}},[i("vue-html5-editor",{ref:"editor",attrs:{content:t.goods.content,"show-module-name":!1,height:500},on:{change:t.updateData}}),t._v(" "),i("div",{staticClass:"next-footer",staticStyle:{"margin-left":"120px","margin-top":"10px"}},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.btn_desc_loading},on:{click:function(e){t.saveDesc()}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.activeName="first"}}},[t._v("上一步")])],1)],1):t._e()],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:5,show:t.showPhotoDialog,current_len:t.shop_imgs.length},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}}),t._v(" "),i("upload-photo",{attrs:{limit:5,limit_max:!1,show:t.isShowUpload,current_len:t.editor_imgs.length},on:{confirm:t.confirmEditorImg,"update:show":t.switchEditorShow}})],1)},staticRenderFns:[]};var Ze=i("VU/8")(Ge,Qe,!1,function(t){i("eBDY")},null,null).exports,Xe={name:"goods-list",components:{CommonTemplate:S.default},data:function(){return{list:null,req:{type:2},page:{pageNo:1,pageSize:20},choose_id_arr:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.req.p=this.page.pageNo,this.req.s=this.page.pageSize,Pe(this.req).then(function(e){t.list=e.list,t.list.forEach(function(t){t.frozen=Boolean(t.frozen)}),t.page=e.page},function(e){t.$message.error(e.msg)})},reload:function(){this.page.pageNo=1,this.getList()},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getList()},handleSelectionChange:function(t){this.choose_id_arr=t},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection(),this.choose_id_arr=t},handleEdit:function(t){this.$router.push({path:"/store/manager/cent/edit/"+t})},changeStatus:function(t,e){var i=this;Le([t],e?1:0).then(function(t){i.$message.success("操作成功"),i.reload()},function(t){i.$message.error(t.msg)})},batchPublish:function(t){var e=this;if(0!==this.choose_id_arr.length){var i=this.choose_id_arr.map(function(t){return t.id});this.$confirm("确认"+(t?"上架":"下架")+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Le(i,t?1:0).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})}).catch(function(){})}else this.$message.error("请至少选择一个商品！")},handleDelete:function(t){var e=this,i=[t];if(0==t){if(0===this.choose_id_arr.length)return void this.$message.error("请至少选择一项！");i=this.choose_id_arr.map(function(t){return t.id})}this.$confirm("删除后无法恢复，是否确认？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Ne(i).then(function(t){e.$message.success("操作成功"),e.reload()},function(t){e.$message.error(t.msg)})})}}},ti={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster-list"},[i("common-template",[i("h1",{staticClass:"content__title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main-operation",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"operation-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.$router.push("/store/manager/cent/add")}}},[t._v("新增商品")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.batchPublish(1)}}},[t._v("批量上架")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.batchPublish(0)}}},[t._v("批量下架")]),t._v(" "),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.handleDelete(0)}}},[t._v("批量删除")])],1),t._v(" "),i("div",{staticClass:"operation-right"},[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.reload(e):null}},model:{value:t.req.name,callback:function(e){t.$set(t.req,"name",e)},expression:"req.name"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.reload()}},slot:"append"})],1)],1)]),t._v(" "),i("div",{staticClass:"content__main-list",attrs:{slot:"list"},slot:"list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{"min-width":"250",label:"商品信息",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"info-item"},[i("i",{staticClass:"item__image",style:{backgroundImage:"url("+e.row.thumb+")"}}),t._v(" "),i("div",{staticClass:"item__info"},[i("p",{staticClass:"item__info-main",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.name))]),t._v(" "),i("p",{staticClass:"item__info-sub",staticStyle:{"font-weight":"500"}},[t._v(t._s(e.row.keywords))])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"换购条件",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{color:"red"}},[t._v(t._s(e.row.energy)+"能量"),i("br"),t._v(t._s(e.row.price)+"元")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"库存",align:"center",prop:"stock"}}),t._v(" "),i("el-table-column",{attrs:{label:"排序",align:"center",prop:"sort"}}),t._v(" "),i("el-table-column",{attrs:{width:"150",label:"上架状态",align:"center",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":e.row.frozen?"已上架":"已下架"},on:{change:function(i){t.changeStatus(e.row.id,e.row.frozen)}},model:{value:e.row.frozen,callback:function(i){t.$set(e.row,"frozen",i)},expression:"scope.row.frozen"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e()],1)])],1)},staticRenderFns:[]};var ei=i("VU/8")(Xe,ti,!1,function(t){i("xWCP")},null,null).exports,ii={name:"goods-list",components:{UploadPhoto:U},computed:ot()({},Object(at.b)(["isShowUpload"])),data:function(){return{editor_imgs:[],showPhotoDialog:!1,btn_loading:!1,btn_desc_loading:!1,activeName:"first",formLabelWidth:"120px",goods:{frozen:!0,sort:100,content:"",price:.01},next_disbaled:!0,rules:{thumb:[{required:!0,message:"请选择图片",trigger:"blur"}],name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],energy:[{required:!0,message:"请输入能量",trigger:"blur"}],inviteNum:[{required:!0,message:"请输入邀请人数",trigger:"blur"}],stock:[{required:!0,message:"请输入商品库存",trigger:"blur"}]}}},created:function(){this.goods.type=2,this.$route.params.id&&(this.goods.id=this.$route.params.id,this.getGoodsInfo())},methods:ot()({getGoodsInfo:function(){var t=this;qe(this.goods.id).then(function(e){t.next_disbaled=!1,t.goods=e.goods,t.goods.content=t.goods.content?t.goods.content:"",t.goods.frozen=Boolean(t.goods.frozen)},function(e){t.$message.error(e.msg)})},save:function(){var t=this;this.$refs.EditForm.validate(function(e){e&&(t.btn_loading=!0,Te(t.goods).then(function(e){t.btn_loading=!1,0===e.code?(t.$message.success("保存成功！"),t.goods.id=e.goodsId,t.activeName="second",t.next_disbaled=!1):t.$message.error(e.msg)},function(e){t.btn_loading=!1,t.$message.error(e.msg)}))})},saveDesc:function(){var t=this;this.btn_desc_loading=!0,Te({id:this.goods.id,content:this.goods.content}).then(function(e){t.btn_desc_loading=!1,0===e.code?(t.$message.success("保存成功！"),t.activeName="first",t.back()):t.$message.error(e.msg)},function(e){t.btn_desc_loading=!1,t.$message.error(e.msg)})},confirmPhoto:function(t){this.goods.thumb=t[0]},updateData:function(t){this.goods.content=t},back:function(){this.$router.push({path:"/store/manager/cent"})}},Object(at.c)(["showUpload"]),{confirmEditorImg:function(t){var e=this;this.showUpload(!1),console.log(t);var i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Ee(t).then(function(t){i.close(),t.picArr&&t.picArr.forEach(function(t){e.$refs.editor.execCommand("insertImage",t)})},function(t){i.close(),e.$message.error(t.msg)})},switchEditorShow:function(t){this.showUpload(t)}})},si={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-add-content goods-add-content"},[i("h1",{staticClass:"content__title"},[i("router-link",{attrs:{to:"/store/manager/cent"}},[t._v("商品列表 ")]),t._v(" / "+t._s(t.$route.meta.title)+"\n  ")],1),t._v(" "),i("div",{staticClass:"content__main",staticStyle:{"margin-top":"20px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{staticClass:"main-first",staticStyle:{"padding-bottom":"30px"},attrs:{label:"① 填写基本信息",name:"first"}},[i("div",{staticClass:"section"},[i("h3",{staticClass:"section-title"},[t._v("基本信息")]),t._v(" "),i("div",{staticClass:"section-content"},[i("el-form",{ref:"EditForm",staticStyle:{width:"600px"},attrs:{rules:t.rules,model:t.goods,"label-width":t.formLabelWidth}},[i("el-form-item",{attrs:{label:"缩略图",prop:"thumb"}},[i("ul",{staticClass:"app-image-list"},[t.goods.thumb?i("li",{staticClass:"image-item",on:{click:function(e){t.showPhotoDialog=!0}}},[i("img",{attrs:{src:t.goods.thumb,role:"presentation",alt:"",width:"80"}})]):i("li",{staticClass:"el-upload el-upload--picture-card",staticStyle:{width:"80px",height:"80px","line-height":"1"},on:{click:function(e){t.showPhotoDialog=!0}}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px","margin-top":"20px"}})])])]),t._v(" "),i("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[i("el-input",{attrs:{size:"small"},model:{value:t.goods.name,callback:function(e){t.$set(t.goods,"name",e)},expression:"goods.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"关键字",prop:"keywords"}},[i("el-input",{attrs:{size:"small"},model:{value:t.goods.keywords,callback:function(e){t.$set(t.goods,"keywords",e)},expression:"goods.keywords"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("增加产品被搜索到的可能性")])],1),t._v(" "),i("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"换购能量",prop:"energy"}},[i("el-input",{staticClass:"xs-input",attrs:{size:"mini"},model:{value:t.goods.energy,callback:function(e){t.$set(t.goods,"energy",e)},expression:"goods.energy"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"邀请人数",prop:"inviteNum"}},[i("el-input",{staticClass:"xs-input",attrs:{size:"mini"},model:{value:t.goods.inviteNum,callback:function(e){t.$set(t.goods,"inviteNum",e)},expression:"goods.inviteNum"}},[i("template",{slot:"append"},[t._v(" / 每人")])],2)],1),t._v(" "),i("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"库存",prop:"stock"}},[i("el-input",{staticClass:"xs-input",attrs:{size:"mini"},model:{value:t.goods.stock,callback:function(e){t.$set(t.goods,"stock",e)},expression:"goods.stock"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"初始销量",prop:"salesNum"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{size:"small"},model:{value:t.goods.salesNum,callback:function(e){t.$set(t.goods,"salesNum",e)},expression:"goods.salesNum"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("设置后商品详情中会显示销量，销量值=初始销量+实际销量")])],1),t._v(" "),i("el-form-item",{attrs:{label:"划线价",prop:"marketPrice"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{size:"small"},model:{value:t.goods.marketPrice,callback:function(e){t.$set(t.goods,"marketPrice",e)},expression:"goods.marketPrice"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("设置后商品列表会展示划线价，用于营造优惠感")])],1),t._v(" "),i("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[i("el-input",{attrs:{size:"small"},model:{value:t.goods.sort,callback:function(e){t.$set(t.goods,"sort",e)},expression:"goods.sort"}}),t._v(" "),i("p",{staticClass:"xs-assist-label"},[t._v("按数值大小升序，越小排在越前")])],1),t._v(" "),i("el-form-item",{attrs:{label:"显示状态",prop:"frozen"}},[i("el-switch",{attrs:{"active-text":t.goods.frozen?"上架中":"已下架"},model:{value:t.goods.frozen,callback:function(e){t.$set(t.goods,"frozen",e)},expression:"goods.frozen"}})],1)],1)],1)]),t._v(" "),i("div",{staticClass:"next-footer",staticStyle:{"margin-left":"120px"}},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.btn_loading},on:{click:t.save}},[t._v(t._s(1==t.goods.type?"保存并下一步":"保存"))]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:t.back}},[t._v("返回")])],1)]),t._v(" "),i("el-tab-pane",{staticStyle:{"padding-bottom":"30px"},attrs:{label:"② 编辑详情",name:"second",disabled:t.next_disbaled}},[i("vue-html5-editor",{ref:"editor",attrs:{content:t.goods.content,"show-module-name":!1,height:500},on:{change:t.updateData}}),t._v(" "),i("div",{staticClass:"next-footer",staticStyle:{"margin-left":"120px","margin-top":"10px"}},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.btn_desc_loading},on:{click:function(e){t.saveDesc()}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.activeName="first"}}},[t._v("上一步")])],1)],1)],1)],1),t._v(" "),i("upload-photo",{attrs:{limit:1,action:"change",show:t.showPhotoDialog},on:{"update:show":function(e){t.showPhotoDialog=e},confirm:t.confirmPhoto}}),t._v(" "),i("upload-photo",{attrs:{limit:5,limit_max:!1,show:t.isShowUpload,current_len:t.editor_imgs.length},on:{confirm:t.confirmEditorImg,"update:show":t.switchEditorShow}})],1)},staticRenderFns:[]};var oi=i("VU/8")(ii,si,!1,function(t){i("SBjH")},null,null).exports,ai=function(t){return u.a.post("/orders/list",t)},ni=function(t,e){return u.a.post("/orders/"+t+"/remarks/",{value:e})},li=function(t){return u.a.post("/orders/"+t+"/cancel",{})},ri=function(t,e){return u.a.post("/orders/"+t+"/delivery",e)},ci={name:"orders-list",components:{},data:function(){return{list:null,dialogFormVisible:!0,order_status:["全部","","待发货","已发货，待收货","已完成","已评价","交易关闭","已退款"],typeList:["全部","兑换商品","一分兑换"],tag_types:["","info","warning"],status_arr:[{name:"全部",status:null},{name:"待发货",status:2},{name:"已发货",status:3},{name:"已完成",status:4},{name:"已关闭",status:6}],number1:0,number2:0,statusList:[],inputTypeList:["订单号","收货人","联系电话"],ordersReq:{type:0,status:null,timeRange:"",inputType:0,inputKeywords:""},page:{pageNo:1,pageSize:10},pickerOption:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-7776e6),t.$emit("pick",[i,e])}}]},companys:[{value:"顺丰快递"},{value:"申通快递"},{value:"圆通快递"},{value:"中通快递"},{value:"百世快递"},{value:"韵达快递"},{value:"天天快递"},{value:"中国邮政"},{value:"邮政EMS"},{value:"宅急送"},{value:"德邦快递"},{value:"全峰快递"},{value:"其他快递"}],orders:{},checkAllFlag:!1,goods_checked_arr:[],delivery_list:[],deliveryReq:{type:1,index:0},showDelivery:!1,todolist:[]}},created:function(){this.statusList=this.status_arr,this.getOrdersList()},methods:{cancelOrders:function(t){var e=this;this.$confirm("是否确认取消并关闭订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){li(e.list[t].ordersNo).then(function(i){e.$message.success("操作成功"),e.list.splice(t,1)},function(t){e.$message.error(t.msg)})}).catch(function(){})},remarks:function(t){var e=this;this.$prompt("请输入备注内容","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/.+/,inputErrorMessage:"备注内容不能为空"}).then(function(i){var s=i.value;ni(e.list[t].ordersNo,s).then(function(i){e.list[t].remark=s},function(t){e.$message.error(t.msg)})}).catch(function(){})},querySearch:function(t,e){var i=this.companys;e(t?i.filter(this.createFilter(t)):i)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},chooseDeliveryItem:function(){var t=this,e=[];"0"===this.deliveryReq.index?e=this.todolist:(this.deliveryReq=this.delivery_list[this.deliveryReq.index-1],this.deliveryReq.itemList=this.orders.itemList.filter(function(e){return e.deliveryId==t.deliveryReq.id})),this.deliveryReq.list=e},showDeliveryPop:function(t){this.orders=this.list[t],this.orders.idx=t,this.showDelivery=!0,this.goods_checked_arr=[];var e=[],i=[];this.orders.status<4&&this.orders.itemList.forEach(function(t){t.status&&1!==t.status?i.push(t.deliveryInfo):e.push(t)}),this.todolist=e,this.delivery_list=i,this.todolist&&this.todolist.length>0?this.deliveryReq={index:"0",deliveryType:1,ordersNo:this.orders.ordersNo,ordersId:this.orders.id,itemList:this.todolist}:this.deliveryReq=this.delivery_list[0],this.checkAllFlag=!0,this.checkedAll()},closeDeliveryPop:function(){this.todolist=[],this.delivery_list=[],this.deliveryReq={deliveryType:1,index:"0"},this.showDelivery=!1},confirmDelivery:function(){var t=this,e=[];if(0!==(e=this.deliveryReq.id?this.deliveryReq.itemList.map(function(t){return t.id}):this.goods_checked_arr).length){if(1===this.deliveryReq.deliveryType){if(!this.deliveryReq.deliveryWay)return void this.$message.error("请选择物流公司！");if(!this.deliveryReq.deliveryNo)return void this.$message.error("请完善物流单号！")}var i={id:this.deliveryReq.id,deliveryType:this.deliveryReq.deliveryType,deliveryWay:this.deliveryReq.deliveryWay,deliveryNo:this.deliveryReq.deliveryNo,orderItems:e};this.$confirm("是否确认发货?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});ri(t.deliveryReq.ordersNo,i).then(function(i){e.close(),0===i.code?(t.closeDeliveryPop(),t.reload(),i.errorCode&&600===i.errorCode?t.$message.error(i.msg):t.$message.success("操作成功")):t.$message.error(i.msg)},function(i){e.close(),t.$message.error(i.msg)})}).catch(function(){})}else this.$message.error("请至少选择一个商品进行发货！")},getOrdersList:function(){var t=this;this.ordersReq.p=this.page.pageNo,this.ordersReq.s=this.page.pageSize,0===this.ordersReq.inputType?(this.ordersReq.ordersNo=this.ordersReq.inputKeywords,this.ordersReq.username=null,this.ordersReq.phone=null):1===this.ordersReq.inputType?(this.ordersReq.orderNo=null,this.ordersReq.username=this.ordersReq.inputKeywords,this.ordersReq.phone=null):2===this.ordersReq.inputType&&(this.ordersReq.orderNo=null,this.ordersReq.username=null,this.ordersReq.phone=this.ordersReq.inputKeywords),ai(this.ordersReq).then(function(e){console.log(e),t.page=e.page,t.list=e.list?e.list:[],t.list.forEach(function(t){t.itemList.forEach(function(t){t.attrs&&(t.attrsStr=JSON.parse(t.attrs).join(" & "))})})},function(e){t.list=[],t.$message.error(e.msg)})},checkedAll:function(){var t=this;this.checkAllFlag?(this.goods_checked_arr=[],this.deliveryReq.itemList.forEach(function(e){t.goods_checked_arr.push(e.id)})):this.goods_checked_arr=[]},checkedItem:function(t){this.checkAllFlag=!!t&&this.goods_checked_arr.length===this.deliveryReq.itemList.length},changeOrderType:function(){this.ordersReq.status=null,this.reload()},changeTimeRange:function(){this.ordersReq.timeRange?(this.ordersReq.start=this.ordersReq.timeRange[0],this.ordersReq.end=this.ordersReq.timeRange[1]):(this.ordersReq.start=null,this.ordersReq.end=null),this.reload()},reload:function(){this.list=null,this.page.pageNo=1,this.getOrdersList()},changePageSize:function(t){this.page.pageNo=1,this.page.pageSize=t,this.list=null,this.getOrdersList()},changePageNo:function(t){this.page.pageNo=t,this.list=null,this.getOrdersList()}}},di={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-content"},[i("h1",{staticClass:"content__title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("div",{staticClass:"content__main"},[i("div",{staticClass:"content__main-operation"},[i("div",{staticClass:"operation-top"},[i("div",{staticClass:"operation-top__l"},[i("div",{staticClass:"operation-item"},[i("span",[t._v("下单时间: ")]),t._v(" "),i("el-date-picker",{staticClass:"xs-date-picker",attrs:{type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOption,format:"yyyy-MM-dd",size:"mini"},on:{change:t.changeTimeRange},model:{value:t.ordersReq.timeRange,callback:function(e){t.$set(t.ordersReq,"timeRange",e)},expression:"ordersReq.timeRange"}})],1),t._v(" "),i("div",{staticClass:"operation-item"},[i("span",[t._v("订单类型: ")]),t._v(" "),i("el-select",{attrs:{size:"mini",placeholder:"请选择订单类型"},on:{change:t.changeOrderType},model:{value:t.ordersReq.type,callback:function(e){t.$set(t.ordersReq,"type",e)},expression:"ordersReq.type"}},t._l(t.typeList,function(t,e){return i("el-option",{key:t.idx,attrs:{label:t,value:e}})}))],1)]),t._v(" "),i("div",{staticClass:"operation-item"},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.reload(e):null}},model:{value:t.ordersReq.inputKeywords,callback:function(e){t.$set(t.ordersReq,"inputKeywords",e)},expression:"ordersReq.inputKeywords"}},[i("el-select",{staticStyle:{width:"100px","padding-right":"10px","padding-left":"5px"},attrs:{slot:"prepend",placeholder:"订单编号"},slot:"prepend",model:{value:t.ordersReq.inputType,callback:function(e){t.$set(t.ordersReq,"inputType",e)},expression:"ordersReq.inputType"}},t._l(t.inputTypeList,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:e}})})),t._v(" "),i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.reload()}},slot:"append"})],1)],1)]),t._v(" "),i("div",{staticClass:"operation-bottom"},[i("div",{staticClass:"operation-item"},[i("span",[t._v("订单状态: ")]),t._v(" "),t._l(t.statusList,function(e,s){return i("el-badge",{key:s,staticClass:"item",attrs:{value:1!=e.status&&2!=e.status?0:1===e.status?t.number1:t.number2,hidden:1!=e.status&&2!=e.status||1===e.status&&0===t.number1||2===e.status&&0===t.number2}},[i("el-button",{attrs:{type:t.ordersReq.status===e.status&&t.ordersReq.groupStatus==e.groupStatus?"primary":"",size:"mini"},on:{click:function(i){t.ordersReq.status=e.status,t.ordersReq.groupStatus=e.groupStatus,t.reload()}}},[t._v("\n                "+t._s(e.name)+"\n              ")])],1)})],2)])]),t._v(" "),i("div",{staticClass:"content__main-list"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.list,expression:"!list"}],staticClass:"order-table"},[t._m(0),t._v(" "),i("ul",{staticClass:"table-body"},t._l(t.list,function(e,s){return i("li",{key:s,staticClass:"order-item"},[i("div",{staticClass:"item__header"},[i("span",[t._v("订单编号: "+t._s(e.ordersNo)+"  "),i("el-tag",{attrs:{type:t.tag_types[e.type],size:"mini",hit:!0,"disable-transitions":!0}},[t._v(t._s(t.typeList[e.type]))])],1),t._v(" "),i("span",[t._v("下单时间: "+t._s(e.createTime))]),t._v(" "),e.groupOrderId>0?i("span",[t._v("团编号:"+t._s(e.groupOrderId))]):t._e(),t._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.remarks(s)}}},[t._v("备注")])],1),t._v(" "),i("div",{staticClass:"item__content"},[i("div",{staticClass:"main"},t._l(e.itemList,function(s,o){return i("div",{key:o,staticClass:"content-info_item"},[i("i",{style:{backgroundImage:"url("+s.pic+")"}}),t._v(" "),i("div",[i("div",{staticClass:"item__name"},[i("h3",[t._v(t._s(s.name))]),t._v(" "),1!=e.status&&6!=e.status?[2===s.status?i("el-tag",{attrs:{size:"mini"}},[t._v("已发")]):t._e(),t._v(" "),s.status&&1!==s.status?t._e():i("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v("待发")])]:t._e()],2),t._v(" "),i("div",[i("span",[t._v("数量: "+t._s(s.number))]),t._v(" "),s.attrsStr?i("span",[t._v("【"+t._s(s.attrsStr)+"】")]):t._e()]),t._v(" "),i("div",[i("span",[t._v("能量: "+t._s(s.energy)+" "),s.price?[t._v("+ ￥"+t._s(s.price))]:t._e()],2)])])])})),t._v(" "),i("div",{staticClass:"item__pay price"},[i("div",[i("p",[t._v(t._s(e.energy)+"能量 "),e.price?[t._v(" + ￥"+t._s(e.price))]:t._e()],2)])]),t._v(" "),i("div",{staticClass:"item__concat"},[i("p",[t._v("收货人: "+t._s(e.username))]),t._v(" "),i("p",[t._v("收货地址: "+t._s(e.address))]),t._v(" "),i("p",[t._v("电话: "+t._s(e.phone))]),t._v(" "),e.deliveryInfo?[i("p",[t._v("快递公司: "+t._s(e.deliveryInfo.company))]),t._v(" "),i("p",[t._v("快递单号: "+t._s(e.deliveryInfo.number))])]:t._e()],2),t._v(" "),i("div",{staticClass:"item__status"},[i("p",[t._v(t._s(t.order_status[e.status]))]),t._v(" "),2===e.status?i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.cancelOrders(s)}}},[t._v("取消")]):t._e(),t._v(" "),2===e.status?i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.showDeliveryPop(s)}}},[t._v("发货")]):t._e()],1)]),t._v(" "),e.message?i("div",{staticClass:"item__header ",staticStyle:{background:"#ffebc1",color:"#dfa700","border-bottom":"none","border-top":"#f2f2f6 solid 1px"}},[t._v("\n              买家留言："+t._s(e.message)+"\n            ")]):t._e(),t._v(" "),e.remark?i("div",{staticClass:"item__header",staticStyle:{background:"#fbd0cd",color:"#fb7168","border-bottom":"none","border-top":"#f2f2f6 solid 1px"}},[t._v("\n              卖家备注："+t._s(e.remark)+"\n            ")]):t._e()])}))])]),t._v(" "),t.list&&t.list.length>0?i("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50],"page-size":t.page.pageSize,"current-page":t.page.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalRows},on:{"size-change":t.changePageSize,"current-change":t.changePageNo}})],1):t._e(),t._v(" "),i("el-dialog",{staticClass:"xs-dialog deliveryPop",attrs:{title:"商品发货",visible:t.showDelivery},on:{"update:visible":function(e){t.showDelivery=e}}},[i("el-tabs",{on:{"tab-click":t.chooseDeliveryItem},model:{value:t.deliveryReq.index,callback:function(e){t.$set(t.deliveryReq,"index",e)},expression:"deliveryReq.index"}},[t.todolist&&t.todolist.length>0?i("el-tab-pane",{attrs:{label:"未发货",name:"0"}}):t._e(),t._v(" "),t._l(t.delivery_list,function(t,e){return i("el-tab-pane",{key:e,attrs:{label:"包裹"+(e+1),name:e+1+""}})})],2),t._v(" "),i("div",{staticClass:"order-table",staticStyle:{border:"1px solid #efefef"}},[i("div",{staticClass:"table-header"},[null==t.deliveryReq.id?i("span",{staticClass:"cell"},[i("el-checkbox",{attrs:{checked:t.checkAllFlag},on:{change:t.checkedAll},model:{value:t.checkAllFlag,callback:function(e){t.checkAllFlag=e},expression:"checkAllFlag"}})],1):t._e(),t._v(" "),i("span",{staticClass:"main"},[t._v("商品信息")]),t._v(" "),i("span",{staticClass:"fixed"},[t._v("数量")])]),t._v(" "),i("ul",{staticClass:"table-body"},[i("li",{staticClass:"order-item"},t._l(t.deliveryReq.itemList,function(e,s){return i("div",{key:s,staticClass:"item__content"},[null==t.deliveryReq.id?i("div",{staticClass:"cell"},[i("el-checkbox",{attrs:{label:e.id},on:{change:t.checkedItem},model:{value:t.goods_checked_arr,callback:function(e){t.goods_checked_arr=e},expression:"goods_checked_arr"}},[t._v("  ")])],1):t._e(),t._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"content-info_item"},[i("i",{style:{backgroundImage:"url("+e.pic+")"}}),t._v(" "),i("div",[i("div",{staticClass:"item__name"},[i("h3",[t._v(t._s(e.name))]),t._v(" "),2===e.status?i("el-tag",{attrs:{size:"mini"}},[t._v("已发")]):t._e(),t._v(" "),e.status&&1!==e.status?t._e():i("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v("待发")])],1),t._v(" "),i("div",[e.attrsStr?i("span",[t._v("【"+t._s(e.attrsStr)+"】")]):t._e()]),t._v(" "),i("div",[i("span",[t._v("能量: ¥"+t._s(e.amount))]),t._v(" "),i("span",[t._v("x "+t._s(e.number))])])])])]),t._v(" "),i("div",{staticClass:"item__status"},[i("span",[t._v(t._s(e.number))])])])}))])]),t._v(" "),i("el-form",[i("el-form-item",{attrs:{label:"订单编号"}},[i("span",[t._v(t._s(t.orders.ordersNo))])]),t._v(" "),i("el-form-item",{attrs:{label:"下单时间"}},[i("span",[t._v(t._s(t.orders.createTime))])]),t._v(" "),i("el-form-item",{attrs:{label:"收货信息"}},[i("span",[t._v(t._s(t.orders.username)+", "+t._s(t.orders.phone)+", "+t._s(t.orders.address))])]),t._v(" "),i("el-form-item",{attrs:{label:"发货方式"}},[i("div",[i("el-radio",{attrs:{label:1,disabled:null!=t.deliveryReq.id},model:{value:t.deliveryReq.deliveryType,callback:function(e){t.$set(t.deliveryReq,"deliveryType",e)},expression:"deliveryReq.deliveryType"}},[t._v("物流信息")]),t._v(" "),i("el-radio",{attrs:{label:2,disabled:null!=t.deliveryReq.id},model:{value:t.deliveryReq.deliveryType,callback:function(e){t.$set(t.deliveryReq,"deliveryType",e)},expression:"deliveryReq.deliveryType"}},[t._v("无需物流")])],1)]),t._v(" "),0===t.deliveryReq.id?[i("el-form-item",{attrs:{label:"快递公司"}},[i("span",[t._v(t._s(t.deliveryReq.deliveryWay))])]),t._v(" "),i("el-form-item",{attrs:{label:"快递单号"}},[i("span",[t._v(t._s(t.deliveryReq.deliveryNo))])])]:1===t.deliveryReq.deliveryType?[i("el-form-item",{attrs:{label:"快递公司"}},[i("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入内容",size:"small"},model:{value:t.deliveryReq.deliveryWay,callback:function(e){t.$set(t.deliveryReq,"deliveryWay",e)},expression:"deliveryReq.deliveryWay"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"快递单号"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:t.deliveryReq.deliveryNo,callback:function(e){t.$set(t.deliveryReq,"deliveryNo",e)},expression:"deliveryReq.deliveryNo"}})],1)]:t._e()],2),t._v(" "),t.orders.status<4||70==t.orders.status?i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.closeDeliveryPop}},[t._v(t._s(0!=t.deliveryReq.id?"取 消":"关 闭"))]),t._v(" "),0!=t.deliveryReq.id?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmDelivery}},[t._v("确 定")]):t._e()],1):t._e()],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-header"},[e("span",{staticClass:"main"},[this._v("商品信息")]),this._v(" "),e("span",{staticClass:"price"},[this._v("兑换能量")]),this._v(" "),e("span",{staticClass:"fixed"},[this._v("配送信息")]),this._v(" "),e("span",{staticClass:"fixed"},[this._v("订单状态")])])}]};var ui={path:"/store",name:"兑换商城",icon:"el-icon-star-off",component:Se,hidden_child:!1,children:[{name:"商城管理",path:"manager",component:ze,children:[{name:"兑换商品",path:"goods",component:Ae,meta:{title:"兑换商品"}},{exclude:!0,path:"goods/add",component:Ze,meta:{title:"添加换购商品"}},{exclude:!0,path:"goods/edit/:id",component:Ze,meta:{title:"编辑商品信息"}},{name:"一分钱换购",path:"cent",component:ei,meta:{title:"一分钱换购"}},{exclude:!0,path:"cent/add",component:oi,meta:{title:"添加一分购商品"}},{exclude:!0,path:"cent/edit/:id",component:oi,meta:{title:"编辑商品信息"}},{name:"订单管理",path:"orders",component:i("VU/8")(ci,di,!1,function(t){i("wHDF")},"data-v-f8e29d18",null).exports,meta:{title:"订单管理"}}],redirect:"/store/manager/goods"}],redirect:"/store/manager"};s.default.use(n.a);var pi=[{path:"/login",name:"登录",component:function(t){return i.e(0).then(function(){var e=[i("xJsL")];t.apply(null,e)}.bind(this)).catch(i.oe)}},{path:"/",name:"home",component:_,redirect:"/dashboard",leaf:!0,menuShow:!0,iconCls:"iconfont icon-home",children:[{path:"/dashboard",component:b,name:"首页",icon:"el-icon-menu",meta:{title:"首页"}},ui,N,It,ke]},{path:"*",name:"111",exclude:!0,redirect:b.path}],mi=new n.a({routes:pi}),fi=["/login","/authredirect"];mi.beforeEach(function(t,e,i){t.meta.title&&(document.title=t.meta.title);var s=Object(l.a)();s&&""!=s?i():(console.log("has no token"),-1!==fi.indexOf(t.path)?i():i("/login"))});var hi=i("zL8q"),gi=i.n(hi),_i={state:{roles:[]}},vi={token:function(t){return t.user.token},roles:function(t){return t.user.roles}},bi={state:{isShowUpload:!1},getters:{isShowUpload:function(t){return t.isShowUpload}},actions:{},mutations:{showUpload:function(t,e){t.isShowUpload=e}}};s.default.use(at.a);var yi=new at.a.Store({modules:{user:_i,editor:bi},getters:vi}),wi=i("Lokx"),ki=i.n(wi),xi=i("g6v0"),Ci=i.n(xi);i("tvR6"),i("0ZNX");s.default.use(gi.a),s.default.directive("focus",{update:function(t,e){e.value&&t.focus()}}),s.default.directive("sortable",{inserted:function(t,e){new ki.a(t,e.value||{})}}),s.default.use(Ci.a,{showModuleName:!0,image:{sizeLimit:2097152,upload:{url:"/energy_ht/file/upload",fieldName:"upfile"},uploadHandler:function(t){return(t=JSON.parse(t)).filePath},compress:{width:750,quality:80},width:500,height:500,quality:80},language:"zh-cn",hiddenModules:["image"],modules:[{name:"multi images",icon:"fa fa-file-picture-o",show:!0,handler:function(){yi.commit("showUpload",!0)}}]}),new s.default({el:"#app",store:yi,router:mi,components:{App:a},template:"<App/>"})},Nd0f:function(t,e){},Qkdc:function(t,e){},Qx0i:function(t,e){},R1ah:function(t,e){},SBjH:function(t,e){},TIfe:function(t,e,i){"use strict";e.a=function(){return o.a.get(a)},e.b=function(t){return o.a.set(a,t)};var s=i("lbHh"),o=i.n(s),a="Admin-Token"},V8gb:function(t,e){},WVyz:function(t,e){},aCkm:function(t,e){},bXLH:function(t,e){},eBDY:function(t,e){},faVD:function(t,e){},kmkW:function(t,e){},lHVt:function(t,e){},lryW:function(t,e){},mbKe:function(t,e){},oIwQ:function(t,e){},oeO3:function(t,e){},pA66:function(t,e){},tvR6:function(t,e){},uFv7:function(t,e){},w4jL:function(t,e,i){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"common-list-content"},[this._t("title"),this._v(" "),e("div",{staticClass:"content__main"},[this._t("header"),this._v(" "),e("div",{staticClass:"content__main-list"},[this._t("list")],2)],2)],2)},staticRenderFns:[]};e.a=s},wHDF:function(t,e){},wS5Y:function(t,e){},xWCP:function(t,e){},yc4b:function(t,e){},"z74+":function(t,e){},zZ0s:function(t,e){},zgCA:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b1b509559da04f39855c.js.map